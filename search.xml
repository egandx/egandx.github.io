<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Go Mapæ‰©å®¹</title>
      <link href="2022/10/24/Go_Map_Grow/"/>
      <url>2022/10/24/Go_Map_Grow/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨sliceçš„æ—¶å€™ï¼Œå¦‚æœå‘sliceä¸­è¿½åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå¯¼è‡´å…ƒç´ æ•°é‡å¤§äºcapï¼Œè¿™æ—¶å€™å°±ä¼šå‘ç”Ÿsliceçš„æ‰©å®¹ã€‚é‚£ä¹ˆåœ¨goè¯­è¨€ä¸­ï¼Œä»€ä¹ˆæ—¶å€™mapä¼šå‘ç”Ÿæ‰©å®¹å‘¢ï¼Ÿæ‰©å®¹çš„ç­–ç•¥æœ‰å“ªäº›å‘¢ï¼Ÿæ‰©å®¹çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿå¾ˆæ˜¯å¥½å¥‡ï¼Œå¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ã€‚å¼€å§‹å­¦ä¹ ï¼Œåˆæ˜¯æ”¶è·æ»¡æ»¡çš„ä¸€å¤©ã€‚</p><span id="more"></span><h2 id="0x0-è§¦å‘æ‰©å®¹çš„æ¡ä»¶"><a href="#0x0-è§¦å‘æ‰©å®¹çš„æ¡ä»¶" class="headerlink" title="0x0.è§¦å‘æ‰©å®¹çš„æ¡ä»¶"></a>0x0.è§¦å‘æ‰©å®¹çš„æ¡ä»¶</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œmapæ˜¯ä½¿ç”¨hashè¡¨çš„ã€‚ä½¿ç”¨hashè¡¨çš„ç›®çš„å°±æ˜¯è¿½æ±‚æ›´åŠ å¿«é€Ÿçš„æ‰¾åˆ°keyï¼Œä½†æ˜¯å½“mapä¸­keyçš„æ•°é‡é€æ¸å¢åŠ ï¼Œé€æ¸ç¦»è°±çš„æ—¶å€™ï¼Œé‚£ä¹ˆç¢°æ’çš„å‡ ç‡å°±è¶Šæ¥è¶Šå¤§ï¼Œæ•ˆç‡ä¹Ÿå°±éšä¹‹ä¸‹é™äº†ã€‚æœ€ç¦»è°±çš„æ—¶å€™å°±æ˜¯æ‰€æœ‰çš„keyéƒ½åœ¨ä¸€ä¸ªbucketé‡Œé¢ (<del>è¿™æ˜¯ç¢³åŸºç”Ÿç‰©èƒ½å¹²å‡ºæ¥çš„äº‹?è¿™å’Œé“¾è¡¨æœ‰ä¸ªé”¤å­çš„åŒºåˆ«å—ï¼Ÿ</del>)ï¼Œæœ€å¥½å°±æ˜¯ä¸€ä¸ªbucketé‡Œé¢å°±ä¸€ä¸ªkeyï¼Œæ‰¾åˆ°äº†bucketå°±æ‰¾åˆ°äº†keyï¼Œæ•ˆç‡è´¼é«˜ï¼Œç›´æ¥æ‹‰åˆ°o(1)ã€‚ä½†æ˜¯ç©ºé—´ä¸å…è®¸å•Šï¼Œä¸ºäº†æ•ˆç‡ç”¨ç©ºé—´æ¢æ—¶é—´ä¸å¯’ç¢œï¼Ÿ(<del>å¾ˆå¯’ç¢œï¼Œè´¼TMå¯’ç¢œ</del>)ã€‚</p><p>æœ€å¥½æœ€åéƒ½å±äºæç«¯ï¼Œå…¶å®éƒ½å¾ˆéš¾é‡åˆ°ï¼Œåªæ˜¯åœ¨ä¸¾ğŸŒ°çš„æ—¶å€™å¤¸å¼ è¡¨è¿°æ‰ä¼šç”¨åˆ°ã€‚åœ¨goè¯­è¨€ä¸­ï¼Œæœ‰ä¸€ä¸ª<code>loadFactor</code>æŒ‡æ ‡æ¥å¯¹ä¸Šé¢çš„ä¸¤ç§æƒ…å†µè¿›è¡Œè¡¡é‡ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šæºç (/go1.18.2/src/runtime/map.go)</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ¡ä»¶åœ¨mapassignå‡½æ•°ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// If we hit the max load factor or we have too many overflow buckets,</span></span><br><span class="line"><span class="comment">// and we&#x27;re not already in the middle of growing, start growing.</span></span><br><span class="line"><span class="keyword">if</span> !h.growing() &amp;&amp; (overLoadFactor(h.count+<span class="number">1</span>, h.B) || tooManyOverflowBuckets(h.noverflow, h.B)) &#123;</span><br><span class="line">hashGrow(t, h)</span><br><span class="line"><span class="keyword">goto</span> again <span class="comment">// Growing the table invalidates everything, so try again</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„æ¡ä»¶å¯ä»¥çœ‹å‡ºï¼Œmapæ‰©å®¹ä¸€ä¸ªæ˜¯åœ¨<code>overLoadFactor</code>çš„æ—¶å€™ï¼Œä¸€ä¸ªæ˜¯åœ¨<code>tooManyOverflowBuckets</code>ã€‚ä¸‹é¢æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°æ‰€ç”¨åˆ°çš„å¸¸é‡ä»¥åŠä¸»è¦çš„å¼•ç”¨å‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line"><span class="comment">// Maximum number of key/elem pairs a bucket can hold.</span></span><br><span class="line">bucketCntBits = <span class="number">3</span></span><br><span class="line">bucketCnt     = <span class="number">1</span> &lt;&lt; bucketCntBits <span class="comment">//8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Maximum average load of a bucket that triggers growth is 6.5.</span></span><br><span class="line"><span class="comment">// Represent as loadFactorNum/loadFactorDen, to allow integer math.</span></span><br><span class="line">loadFactorNum = <span class="number">13</span></span><br><span class="line">loadFactorDen = <span class="number">2</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// PtrSize is the size of a pointer in bytes - unsafe.Sizeof(uintptr(0)) but as an ideal constant.</span></span><br><span class="line"><span class="comment">// It is also the size of the machine&#x27;s native word size (that is, 4 on 32-bit systems, 8 on 64-bit).</span></span><br><span class="line"><span class="keyword">const</span> PtrSize = <span class="number">4</span> &lt;&lt; (^<span class="keyword">uintptr</span>(<span class="number">0</span>) &gt;&gt; <span class="number">63</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// bucketShift returns 1&lt;&lt;b, optimized for code generation.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bucketShift</span><span class="params">(b <span class="keyword">uint8</span>)</span> <span class="title">uintptr</span></span> &#123;</span><br><span class="line"><span class="comment">// Masking the shift amount allows overflow checks to be elided.</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">uintptr</span>(<span class="number">1</span>) &lt;&lt; (b &amp; (goarch.PtrSize*<span class="number">8</span> - <span class="number">1</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// overLoadFactor reports whether count items placed in 1&lt;&lt;B buckets is over loadFactor.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">overLoadFactor</span><span class="params">(count <span class="keyword">int</span>, B <span class="keyword">uint8</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> count &gt; bucketCnt &amp;&amp; <span class="keyword">uintptr</span>(count) &gt; loadFactorNum*(bucketShift(B)/loadFactorDen)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// tooManyOverflowBuckets reports whether noverflow buckets is too many for a map with 1&lt;&lt;B buckets.</span></span><br><span class="line"><span class="comment">// Note that most of these overflow buckets must be in sparse use;</span></span><br><span class="line"><span class="comment">// if use was dense, then we&#x27;d have already triggered regular map growth.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tooManyOverflowBuckets</span><span class="params">(noverflow <span class="keyword">uint16</span>, B <span class="keyword">uint8</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="comment">// If the threshold is too low, we do extraneous work.</span></span><br><span class="line"><span class="comment">// If the threshold is too high, maps that grow and shrink can hold on to lots of unused memory.</span></span><br><span class="line"><span class="comment">// &quot;too many&quot; means (approximately) as many overflow buckets as regular buckets.</span></span><br><span class="line"><span class="comment">// See incrnoverflow for more details.</span></span><br><span class="line"><span class="keyword">if</span> B &gt; <span class="number">15</span> &#123;</span><br><span class="line">B = <span class="number">15</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// The compiler doesn&#x27;t see here that B &lt; 16; mask B to generate shorter shift code.</span></span><br><span class="line"><span class="keyword">return</span> noverflow &gt;= <span class="keyword">uint16</span>(<span class="number">1</span>)&lt;&lt;(B&amp;<span class="number">15</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1ï¼‰ç¬¬ä¸€ç§æƒ…å†µ"><a href="#1ï¼‰ç¬¬ä¸€ç§æƒ…å†µ" class="headerlink" title="1ï¼‰ç¬¬ä¸€ç§æƒ…å†µ"></a>1ï¼‰ç¬¬ä¸€ç§æƒ…å†µ</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// overLoadFactor reports whether count items placed in 1&lt;&lt;B buckets is over loadFactor.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">overLoadFactor</span><span class="params">(count <span class="keyword">int</span>, B <span class="keyword">uint8</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">  <span class="comment">// æ¢ç®—ä¸€ä¸‹ä¸‹: count &gt; 8 &amp;&amp; count &gt; 13*((2^B)/2)</span></span><br><span class="line">  <span class="comment">// loadFactor = count/(2^B) &gt; 6.5</span></span><br><span class="line"><span class="keyword">return</span> count &gt; bucketCnt &amp;&amp; <span class="keyword">uintptr</span>(count) &gt; loadFactorNum*(bucketShift(B)/loadFactorDen)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>count</code>æ˜¯mapçš„å…ƒç´ ä¸ªæ•°ï¼Œ<code>1&lt;&lt;B</code>è¡¨ç¤ºbucketæ•°ç»„é•¿åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´<font color=red>åœ¨<code>loadFactor := count/(2^B)</code>è¶…è¿‡6.5çš„æ—¶å€™ï¼Œä¼šè§¦å‘mapçš„æ‰©å®¹</font>ã€‚æŒ‰ç…§<code>loadFactor</code>çš„è®¡ç®—æ–¹å¼ï¼Œå½“æ‰€æœ‰bucketéƒ½æ»¡çš„æ—¶å€™æ˜¯8ã€‚è¾¾åˆ°6.5çš„æ—¶å€™ä¹Ÿå°±å·®ä¸å¤šç®—æ˜¯æ»¡äº†å¤§åŠäº†ï¼Œæ— è®ºæŸ¥æ‰¾è¿˜æ˜¯æ’å…¥ï¼Œè¿™ä¸ªæ—¶å€™ç¢°æ’çš„å‡ ç‡å¾ˆé«˜ï¼Œæ•ˆç‡ä¹Ÿä¼šä¸‹é™çš„å‰å®³ï¼Œæ‰€ä»¥è¿™æ˜¯è§¦å‘æ‰©å®¹çš„æ—¶æœºã€‚</p><p>å¦‚æœä¸åœçš„æ’å…¥å…ƒç´ ã€åˆ é™¤å…ƒç´ ï¼Œç„¶ååœ¨æ’å…¥å…ƒç´ ã€‚åˆšå¼€å§‹æ’å…¥å…ƒç´ çš„æ—¶å€™ä¼šåˆ›å»ºå¤§é‡bucketã€‚ä½†æ˜¯åªè¦æ²¡æœ‰è¾¾åˆ°ç¬¬ä¸€ç§æ‰©å®¹æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´loadFactorçš„å€¼ä½äº6.5ã€‚è¿™ä¸ªæ—¶å€™è¿›è¡Œåˆ é™¤å…ƒç´ çš„æ“ä½œï¼Œé™ä½loadFactorçš„åˆ†å­ã€‚ç„¶åé‡å¤æ“ä½œï¼Œå°±ä¼šäº§ç”Ÿå¤§é‡overflow bucketã€‚è¿™ä¸ªæ—¶å€™keyå°±ä¼šè¿‡äºåˆ†æ•£ï¼Œå¯¼è‡´æŸ¥æ‰¾å’Œæ’å…¥çš„æ•ˆç‡è¿‡ä½ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå°±æœ‰äº†ä¸‹é¢ç¬¬äºŒç§è§¦å‘æ‰©å®¹çš„æ¡ä»¶ã€‚</p><h3 id="2-ç¬¬äºŒç§æƒ…å†µ"><a href="#2-ç¬¬äºŒç§æƒ…å†µ" class="headerlink" title="2) ç¬¬äºŒç§æƒ…å†µ"></a>2) ç¬¬äºŒç§æƒ…å†µ</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// tooManyOverflowBuckets reports whether noverflow buckets is too many for a map with 1&lt;&lt;B buckets.</span></span><br><span class="line"><span class="comment">// Note that most of these overflow buckets must be in sparse use;</span></span><br><span class="line"><span class="comment">// if use was dense, then we&#x27;d have already triggered regular map growth.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tooManyOverflowBuckets</span><span class="params">(noverflow <span class="keyword">uint16</span>, B <span class="keyword">uint8</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="comment">// If the threshold is too low, we do extraneous work.</span></span><br><span class="line"><span class="comment">// If the threshold is too high, maps that grow and shrink can hold on to lots of unused memory.</span></span><br><span class="line"><span class="comment">// &quot;too many&quot; means (approximately) as many overflow buckets as regular buckets.</span></span><br><span class="line"><span class="comment">// See incrnoverflow for more details.</span></span><br><span class="line"><span class="keyword">if</span> B &gt; <span class="number">15</span> &#123;</span><br><span class="line">B = <span class="number">15</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// The compiler doesn&#x27;t see here that B &lt; 16; mask B to generate shorter shift code.</span></span><br><span class="line"><span class="keyword">return</span> noverflow &gt;= <span class="keyword">uint16</span>(<span class="number">1</span>)&lt;&lt;(B&amp;<span class="number">15</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¿»è¯‘æˆäººè¯ï¼šoverflowçš„bucketæ•°é‡å¤ªå¤šäº†ã€‚<font color=red>å½“<code>B &gt;= 15</code>çš„æ—¶å€™ï¼Œå¦‚æœoverflowçš„bucketæ•°é‡è¶…è¿‡<code>2^15</code>å°±è§¦å‘æ‰©å®¹ï¼›å½“<code>B &lt; 15</code>çš„æ—¶å€™ï¼Œå¦‚æœoverflowçš„bucketæ•°é‡è¶…è¿‡<code>2^B</code>å°±è§¦å‘æ‰©å®¹ã€‚</font>ç¬¬äºŒç§çš„è¿™ä¸ªæƒ…å†µä¸»è¦æ˜¯ä¸ºäº†é¿å…loadFactorçš„åˆ†å­å°çš„æ—¶å€™ï¼Œå´æœ‰å¤§é‡çš„bucket(åŒ…æ‹¬å¤§é‡çš„overflow bucket)ã€‚</p><h2 id="0x1-æ‰©å®¹ç­–ç•¥"><a href="#0x1-æ‰©å®¹ç­–ç•¥" class="headerlink" title="0x1.æ‰©å®¹ç­–ç•¥"></a>0x1.æ‰©å®¹ç­–ç•¥</h2><p>é’ˆå¯¹ä¸¤ç§ä¸åŒçš„è§¦å‘æ‰©å®¹çš„æ¡ä»¶ï¼Œè¿›è¡Œæ‰©å®¹çš„ç­–ç•¥ä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p><p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯ç”±äºå…ƒç´ æ•°é‡è¿‡å¤šï¼Œå¯¼è‡´äº†bucketæ•°ç»„å¿«æ»¡äº†ã€‚è¿™ä¸ªæ—¶å€™é‡‡ç”¨çš„æ‰©å®¹ç­–ç•¥å°±æ˜¯<code>B+1</code>ï¼Œbucketçš„æ•°ç»„é•¿åº¦å˜æˆä¹‹å‰çš„2å€ï¼ˆ<font color=red>2å€æ‰©å®¹</font>ï¼‰</p><p>ç¬¬äºŒç§æƒ…å†µæ˜¯ç”±äºflowbucketçš„è¿‡å¤šé€ æˆï¼Œå…ƒç´ æ²¡æœ‰é‚£ä¹ˆå¤šï¼Œä¸»è¦æ˜¯ä½ç½®åˆ†æ•£ï¼Œé€ æˆæŸ¥æ‰¾å’Œæ’å…¥çš„æ•ˆç‡è¾ƒä½ã€‚é‡‡ç”¨ç¬¬ä¸€ç§çš„æ‰©å®¹ç­–ç•¥è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œè§£å†³çš„åŠæ³•æ˜¯é‡‡ç”¨<font color=red>ç­‰é‡æ‰©å®¹</font>ï¼Œåˆ›å»ºä¸€ä¸ªå’Œè€bucketsæ•°ç»„ç›¸åŒé•¿åº¦çš„æ–°bucketsæ•°ç»„ã€‚å°†è€bucketsä¸­å¤„äºåŒä¸€ä¸ªbucketçš„å…ƒç´ è¿›è¡Œç´§å¯†æ’åˆ—ï¼Œå°½å¯èƒ½çš„æ¶ˆé™¤overflow bucketï¼ŒèŠ‚çœç©ºé—´ï¼Œæé«˜æ•ˆç‡ã€‚</p><p>mapçš„æ‰©å®¹ä¸æ˜¯åŸå­æ“ä½œï¼Œä¸ä¼šä¸€æ­¥åˆ°ä½ã€‚æ‰©å®¹éœ€è¦å°†åŸæœ¬çš„é”®å€¼å¯¹è¿ç§»åˆ°æ–°bucketå¾—å†…å­˜åœ°å€ä¸­ï¼Œå¤§é‡é”®å€¼å¯¹åŒæ—¶è¿ç§»ä¼šå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥Go mapçš„æ‰©å®¹æ˜¯é‡‡ç”¨â€œæ¸è¿›å¼â€æ–¹å¼ã€‚æ¯æ¬¡æœ€å¤šåªä¼šè¿ç§»2ä¸ªbucketã€‚</p><h2 id="0x2-è¿ç§»è¿‡ç¨‹"><a href="#0x2-è¿ç§»è¿‡ç¨‹" class="headerlink" title="0x2.è¿ç§»è¿‡ç¨‹"></a>0x2.è¿ç§»è¿‡ç¨‹</h2><p>ç¬¬ä¸€ç§æ‰©å®¹ç­–ç•¥ï¼Œå› ä¸º<code>B+1</code>ä¼šå¯¼è‡´keyçš„hashå€¼éœ€è¦é‡æ–°è®¡ç®—ï¼Œæ‰èƒ½ç¡®å®šå®ƒä¼šè½å…¥é‚£ä¸ªbucketä¸­ï¼Œæ¯•ç«Ÿç¡®å®šbucketä½ç½®çš„æ˜¯æ ¹æ®hashå€¼çš„åBä½ã€‚è¿™æ ·çš„è¯å°±ä¼šå¯¼è‡´æŸäº›keyåœ¨è¿ç§»å‰åçš„bucketåºå·æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼šåˆå§‹çŠ¶æ€ä¸‹B=2ï¼Œ3å·bucketé‡Œæœ‰ä¸¤ä¸ªkeyçš„hashå€¼å3ä½å€¼<code>011,111</code>ï¼Œç»è¿‡B+1æ‰©å®¹ä¹‹åï¼Œè¿™ä¸¤ä¸ªåŸæœ¬å¤„äº3å·bucketçš„keyä¼šåˆ†åˆ«è½å…¥3å·å’Œ7å·bucketã€‚keyåœ¨è¿ç§»å‰åæ˜¯å¦è¿˜æ˜¯å¤„äºåŸæœ¬çš„bucketå–å†³äºå€’æ•°ç¬¬3ä½æ˜¯0è¿˜æ˜¯1ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                     â”‚                       â”‚</span><br><span class="line">               â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</span><br><span class="line">               â”‚     â”‚                 â”‚     â”‚</span><br><span class="line">         â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚</span><br><span class="line">         â”‚     â”‚     â”‚           â”‚     â”‚     â”‚</span><br><span class="line">   â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”     â”‚     â”‚     â”‚</span><br><span class="line">   â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â”Œâ”€â”€â”´â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”€â”€â”´â”€â”€â”  â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â”‚     â”‚     â”‚     â”‚     â”‚  â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚  â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â”‚     â”‚     â”‚     â”‚     â”‚  â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â””â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”€â”€â”˜  â”‚     â”‚     â”‚     â”‚</span><br><span class="line">   â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">   â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">   â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">   â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">   â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚  4  â”‚  5  â”‚  6  â”‚  7  â”‚</span><br><span class="line">â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ‰©å®¹ç­–ç•¥ï¼Œç­‰é‡æ‰©å®¹å› ä¸ºBæ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥keyè¿˜æ˜¯åœ¨åŸæ¥çš„bucketã€‚ä¸»è¦æ˜¯ä¸ºäº†æ”¶æ‹¢è¿‡äºåˆ†æ•£çš„key(<font color=linblue>å¤§å¤šæ•°éƒ½åˆ†æ•£åœ¨overflow bucketä¸­</font>)ã€‚ä¸‹é¢çš„å›¾æ˜¯è¿ç§»å®Œæˆçš„æƒ…å†µã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">buckets     B&#x3D;2                         buckets     B&#x3D;2</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚     â”‚     â”‚     â”‚     â”‚               â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚               â”‚  0  â”‚  1  â”‚  2  â”‚  3  â”‚</span><br><span class="line">â”‚     â”‚     â”‚     â”‚     â”‚               â”‚     â”‚     â”‚     â”‚     â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”˜</span><br><span class="line">                     â”‚                                       â”‚</span><br><span class="line">   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">   â”‚                                                 â”‚</span><br><span class="line">   â–¼                                                 â–¼</span><br><span class="line">â”Œâ”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”</span><br><span class="line">â”‚bmapâ”‚   â”Œâ”€â–ºâ”‚bmapâ”‚  â”Œâ”€â–ºâ”‚bmapâ”‚                     â”‚bmapâ”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”´â”  â”‚  â”œâ”€â”€â”€â”€â”´â” â”‚  â”œâ”€â”€â”€â”€â”´â”                    â”œâ”€â”€â”€â”€â”´â”</span><br><span class="line">â”‚key:aâ”‚  â”‚  â”‚     â”‚ â”‚  â”‚key:fâ”‚                    â”‚key:aâ”‚</span><br><span class="line">â”‚ 111 â”‚  â”‚  â”‚     â”‚ â”‚  â”‚ 111 â”‚                    â”‚ 111 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚key:bâ”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚key:bâ”‚</span><br><span class="line">â”‚ 011 â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚ 011 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚     â”‚  â”‚  â”‚key:dâ”‚ â”‚  â”‚     â”‚                    â”‚key:câ”‚</span><br><span class="line">â”‚     â”‚  â”‚  â”‚ 111 â”‚ â”‚  â”‚     â”‚                    â”‚ 011 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚key:dâ”‚</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚ 111 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚key:câ”‚  â”‚  â”‚key:eâ”‚ â”‚  â”‚     â”‚                    â”‚key:eâ”‚</span><br><span class="line">â”‚ 011 â”‚  â”‚  â”‚ 111 â”‚ â”‚  â”‚     â”‚                    â”‚ 111 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚key:gâ”‚                    â”‚key:fâ”‚</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚ 011 â”‚                    â”‚ 111 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚key:gâ”‚</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚ 011 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚     â”‚</span><br><span class="line">â”‚     â”‚  â”‚  â”‚     â”‚ â”‚  â”‚     â”‚                    â”‚     â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”¤                    â”œâ”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚*overâ”‚  â”‚  â”‚*overâ”‚ â”‚  â”‚*overâ”‚                    â”‚*overâ”‚</span><br><span class="line">â”‚flow â”œâ”€â”€â”˜  â”‚flow â”œâ”€â”˜  â”‚flow â”‚                    â”‚flow â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go Mapçš„åŸºæœ¬ç»“æ„å’Œkeyçš„å®šä½è¿‡ç¨‹</title>
      <link href="2022/10/22/Go_Map/"/>
      <url>2022/10/22/Go_Map/</url>
      
        <content type="html"><![CDATA[<p>mapç”±key-valueå¯¹ç»„æˆï¼Œå¹¶ä¸”ä¸€ä¸ªkeyåªä¼šå‡ºç°ä¸€æ¬¡ã€‚å¯¹mapå¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥ä¸€ç³»åˆ—æ“ä½œã€‚åœ¨Goè¯­è¨€ï¼Œmapé‡‡ç”¨çš„æ˜¯å“ˆå¸ŒæŸ¥æ‰¾è¡¨å®ç°ï¼Œè§£å†³å“ˆå¸Œå†²çªçš„æ–¹å¼æ˜¯é“¾è¡¨æ³•ã€‚è®°å½•ä¸€ä¸‹å­¦ä¹ è¿‡ç¨‹ä¸­äº†è§£åˆ°çš„mapåŸºæœ¬ç»“æ„å’Œkeyçš„å®šä½è¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="0x0-mapçš„åŸºæœ¬ç»“æ„"><a href="#0x0-mapçš„åŸºæœ¬ç»“æ„" class="headerlink" title="0x0.mapçš„åŸºæœ¬ç»“æ„"></a>0x0.mapçš„åŸºæœ¬ç»“æ„</h2><p>é™„ä¸Šæºç (go1.18.2/src/runtime/map.go)</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// A header for a Go map.</span></span><br><span class="line"><span class="keyword">type</span> hmap <span class="keyword">struct</span> &#123;</span><br><span class="line"><span class="comment">// Note: the format of the hmap is also encoded in</span></span><br><span class="line">  <span class="comment">// cmd/compile/internal/reflectdata/reflect.go.</span></span><br><span class="line"><span class="comment">// Make sure this stays in sync with the compiler&#x27;s definition.</span></span><br><span class="line">count     <span class="keyword">int</span> <span class="comment">// # live cells == size of map.  Must be first (used by len() builtin)</span></span><br><span class="line">flags     <span class="keyword">uint8</span></span><br><span class="line">B         <span class="keyword">uint8</span>  <span class="comment">// log_2 of # of buckets (can hold up to loadFactor * 2^B items)</span></span><br><span class="line">noverflow <span class="keyword">uint16</span> <span class="comment">// approximate number of overflow buckets; see incrnoverflow for details</span></span><br><span class="line">hash0     <span class="keyword">uint32</span> <span class="comment">// hash seed</span></span><br><span class="line"></span><br><span class="line">buckets    unsafe.Pointer <span class="comment">// array of 2^B Buckets. may be nil if count==0.</span></span><br><span class="line">oldbuckets unsafe.Pointer <span class="comment">// previous bucket array of half the size, non-nil only when growing</span></span><br><span class="line">nevacuate  <span class="keyword">uintptr</span>        <span class="comment">// progress counter for evacuation (buckets less than this have been evacuated)</span></span><br><span class="line"></span><br><span class="line">extra *mapextra <span class="comment">// optional fields</span></span><br><span class="line">&#125;                                                               </span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ hmap â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚          count int         â”‚ â”‚     â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚     â–¼</span><br><span class="line">â”‚          flags uint8       â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚[]bmapâ”‚    â”Œâ–ºâ”‚ bmap  â”‚</span><br><span class="line">â”‚           B uint8          â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚   0    â”œâ”€â”€â”˜ â”‚   tophash [bucketCnt]uint8    â”‚</span><br><span class="line">â”‚       noverflow uint16     â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚   1    â”‚    â”‚ key   â”‚                       â”‚</span><br><span class="line">â”‚        hash0 uint32        â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚   2    â”‚    â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">â”‚   buckets unsafe.Pointer   â”œâ”€â”˜  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   3    â”‚    â”‚ valuesâ”‚                       â”‚</span><br><span class="line">â”‚  oldbuckets unsafe.Pointer â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚  ...   â”‚    â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">â”‚     nevacuates uintptr     â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   62   â”‚    â”‚        overflow *bmap         â”‚</span><br><span class="line">â”‚       extra *mapextra      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   63   â”œâ”€â”        â”‚</span><br><span class="line">     â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â–¼                             size&#x3D;2^B  â”‚        â””â”€â”€â”€â”€â”€â–ºâ”‚ bmap  â”‚</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ mapextra â”‚                                 â”‚               â”‚   tophash [bucketCnt]uint8    â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ overflow *[]*bmap  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â” â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ key   â”‚                       â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ bmap  â”‚                           â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">â”‚oldoverflow *[]*bmapâ”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   tophash [bucketCnt]uint8    â”‚   â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤</span><br><span class="line">â”‚ nextoverflow *bmap â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ valuesâ”‚                       â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ key   â”‚                       â”‚   â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">                         â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤   â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">                         â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚   â”œâ”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤</span><br><span class="line">                         â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤   â”‚        overflow *bmap         â”‚</span><br><span class="line">                         â”‚ valuesâ”‚                       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                         â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">                         â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">                         â”œâ”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                         â”‚        overflow *bmap         â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚  nil   â”‚</span><br><span class="line">                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>å…¶ä¸­Bæ˜¯bucketæ•°ç»„é•¿åº¦çš„å¯¹æ•°ï¼Œbucketé‡Œé¢å­˜å‚¨äº†keyå’Œvalueã€‚å¯ä»¥çœ‹è§ä¸€ä¸ªbucketé‡Œé¢æœ€å¤šèƒ½è£…8ä¸ªkeyï¼Œè¿™8ä¸ªkeyåœ¨bucketé‡Œé¢çš„ä½ç½®æ ¹æ®hashå€¼çš„é«˜8ä½å†³å®šã€‚nevacuateè¡¨ç¤ºæ‰©å®¹è¿›åº¦ï¼Œå°äºæ­¤åœ°å€çš„ buckets è¿ç§»å®Œæˆã€‚Asciié£æ ¼çš„mapå†…å­˜æ¨¡å‹å›¾æ˜¯å‚è€ƒæ›¹å¤§githubé‡Œçš„ï¼Œæ›¹å¤§yydsã€‚</p><p>å…¶ä¸­bucketæŒ‡é’ˆæŒ‡å‘çš„ç»“æ„ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// A bucket for a Go map.</span></span><br><span class="line"><span class="keyword">type</span> bmap <span class="keyword">struct</span> &#123;</span><br><span class="line"><span class="comment">// tophash generally contains the top byte of the hash value</span></span><br><span class="line"><span class="comment">// for each key in this bucket. If tophash[0] &lt; minTopHash,</span></span><br><span class="line"><span class="comment">// tophash[0] is a bucket evacuation state instead.</span></span><br><span class="line">tophash [bucketCnt]<span class="keyword">uint8</span></span><br><span class="line"><span class="comment">// Followed by bucketCnt keys and then bucketCnt elems.</span></span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> packing all the keys together and then all the elems together makes the</span></span><br><span class="line"><span class="comment">// code a bit more complicated than alternating key/elem/key/elem/... but it allows</span></span><br><span class="line"><span class="comment">// us to eliminate padding which would be needed for, e.g., map[int64]int8.</span></span><br><span class="line"><span class="comment">// Followed by an overflow pointer.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ bmap  â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚   tophash [bucketCnt]uint8    â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ key   â”‚                       â”‚</span><br><span class="line">â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤</span><br><span class="line">â”‚ valuesâ”‚                       â”‚</span><br><span class="line">â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤</span><br><span class="line">â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤</span><br><span class="line">â”‚        overflow *bmap         â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>å…¶ä¸­keyå’Œvalueæ˜¯å„è‡ªå­˜æ”¾åœ¨ä¸€èµ·çš„ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Œä»¥ä¸‹æ˜¯åœ¨æ³¨é‡Šä¸­çš„å®˜æ–¹è§£é‡Šã€‚</p><blockquote><pre><code>NOTE: packing all the keys together and then all the elems together makes thecode a bit more complicated than alternating key/elem/key/elem/... but it allowsus to eliminate padding which would be needed for, e.g., map[int64]int8.</code></pre></blockquote><p>ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘å†…å­˜å¯¹é½å¸¦æ¥çš„paddingã€‚æ³¨é‡Šä¸­ç»™äº†ä¸€ä¸ªä¾‹å­<code>map[int64]int8</code>ï¼Œå¦‚æœæ˜¯æŒ‰ç…§<code>key/elem/key/elem/</code>è¿™ç§æ–¹å¼å­˜å‚¨ï¼Œç›¸å½“äºæ¯ä¸€ä¸ª<code>key/elem</code>éƒ½éœ€è¦padding7ä¸ªå­—èŠ‚ã€‚64ä½çš„æœºå™¨ä¸Šï¼Œé»˜è®¤çš„å¯¹é½ç³»æ•°æ˜¯8ï¼ŒåŒæ—¶<code>int8</code>çš„å¯¹é½ç³»æ•°æ˜¯1ï¼Œ<code>int64</code>çš„å¯¹é½ç³»æ•°æ˜¯8ã€‚ä»¥ä¸‹æ˜¯<code>key/elem</code>æ–¹å¼äº§ç”Ÿpaddingçš„è¿‡ç¨‹ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªkeyï¼Œkey1(int64)çš„å¤§å°å’Œå¯¹é½å€¼æ˜¯8ï¼Œå æ®8ä½ã€‚æš‚ä¸”å†™åšï¼škkkkkkkk</li><li>ç¬¬ä¸€ä¸ªvalueï¼Œvalue1(int8)çš„å¤§å°å’Œå¯¹é½å€¼æ˜¯1ï¼Œå æ®1ä½ã€‚å†™åšï¼škkkkkkkkï½œv</li><li>ç¬¬äºŒä¸ªkeyï¼Œkey2(int64)çš„å¤§å°å’Œå¯¹é½å€¼æ˜¯8ï¼Œåç§»é‡å¿…é¡»æ˜¯8çš„å€æ•°ã€‚ä¹Ÿå°±äº§ç”Ÿäº†paddingã€‚ä¸èƒ½ç›´æ¥æ¥ç€value1åé¢å†™äº†ï¼Œå†™ä½œï¼škkkkkkkkï½œvxxxxxxxï½œkkkkkkkkã€‚å…¶ä¸­xè¡¨ç¤ºpaddingã€‚åé¢ä¹Ÿå°±æ˜¯ä¾æ¬¡ç±»æ¨äº†ã€‚</li></ul><p>å¦‚æœæ˜¯æŒ‰ç…§<code>key/key/key/.../key/elem/elem/.../elem</code>æ¥è¿›è¡Œå­˜å‚¨çš„è¯ï¼Œåªéœ€è¦åœ¨æœ€åé¢æ·»åŠ paddingå°±è¡Œã€‚å†…å­˜å¯¹é½ä¸€èˆ¬å¥½åƒä¸æ€ä¹ˆä¼šè€ƒè™‘ï¼Œä½†æ˜¯äº†è§£è¿˜æ˜¯éœ€è¦äº†è§£çš„ï¼ŒTODO Listå†åŠ ä¸€é¡¹ã€‚</p><h2 id="0x1-mapä¸­keyçš„ä½ç½®"><a href="#0x1-mapä¸­keyçš„ä½ç½®" class="headerlink" title="0x1.mapä¸­keyçš„ä½ç½®"></a>0x1.mapä¸­keyçš„ä½ç½®</h2><p>åœ¨64ä½çš„æœºå™¨ä¸Šé¢ï¼Œkeyç»è¿‡hashè®¡ç®—åä¼šå¾—åˆ°ä¸€ä¸ª64bitçš„å“ˆå¸Œå€¼ã€‚åœ¨keyçš„å®šä½è¿‡ç¨‹ä¸­ä¼šç”¨åˆ°å“ˆå¸Œå€¼çš„é«˜8ä½å’ŒåBä½ã€‚Bå°±æ˜¯hmapä¸­çš„Bï¼Œå¦‚æœB=6ï¼Œbucketsæ•°ç»„çš„é•¿åº¦å°±æ˜¯2^6=64ã€‚</p><p>ä¸¾ä¸ªğŸŒ°,ç°åœ¨æœ‰ä¸€ä¸ªkeyçš„å“ˆå¸Œå€¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">00000111 | 00001111111011001111111111101010001000000001010000 | 000010</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">                                    key</span><br><span class="line"></span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ 00000111 | 00001111111011001111111111101010001000000001010000 | 000010 â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><br><span class="line">     â”‚                                                              â”‚</span><br><span class="line">     â”‚                                                              â–¼</span><br><span class="line">     â”‚                                     B&#x3D;6          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚                              bucketMask&#x3D;111111   â”‚ 000010&amp;111111  â”‚</span><br><span class="line">     â”‚                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜</span><br><span class="line">     â”‚ tophash                                                       â”‚</span><br><span class="line">     â”‚                                                               â–¼</span><br><span class="line">     â”‚                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤000010&#x3D;2â”‚</span><br><span class="line">     â–¼                                    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 buckets    â–¼</span><br><span class="line">â”‚ 00000111&#x3D;7 â”‚                  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”</span><br><span class="line">â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚    ...   â”‚ 61 â”‚ 62 â”‚ 63 â”‚</span><br><span class="line">      â”‚                         â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜</span><br><span class="line">      â”‚                                   â”‚</span><br><span class="line">      â”‚                                   â”‚</span><br><span class="line">      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚</span><br><span class="line">                                    â”‚     â–¼</span><br><span class="line">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">           â”‚                        â”‚            â”‚bucketâ”‚</span><br><span class="line">           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”             â”‚            â”œâ”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">           â”‚  â”‚ bmap  â”‚             â–¼            â”‚</span><br><span class="line">           â”‚  â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”  â”‚</span><br><span class="line">           â”‚  â”‚111â”‚ 9 â”‚ 3 â”‚ 5 â”‚ 6 â”‚ 7 â”‚ 0 â”‚ 0 â”‚  â”‚</span><br><span class="line">           â”‚  â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤  â”‚</span><br><span class="line">           â”‚  â”‚ key   â”‚                       â”‚  â”‚</span><br><span class="line">           â”‚  â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤  â”‚</span><br><span class="line">           â”‚  â”‚ 5 â”‚ 2 â”‚ 1 â”‚ 4 â”‚ 3 â”‚ 9 â”‚ 0 â”‚ 0 â”‚  â”‚</span><br><span class="line">           â”‚  â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤  â”‚</span><br><span class="line">           â”‚  â”‚ valuesâ”‚                       â”‚  â”‚</span><br><span class="line">           â”‚  â”œâ”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¤  â”‚</span><br><span class="line">           â”‚  â”‚ 3 â”‚ 5 â”‚ 4 â”‚ 7 â”‚ 9 â”‚ 6 â”‚ 0 â”‚ 0 â”‚  â”‚</span><br><span class="line">           â”‚  â”œâ”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”¤  â”‚</span><br><span class="line">           â”‚  â”‚        overflow *bmap         â”‚  â”‚</span><br><span class="line">           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚</span><br><span class="line">           â”‚                                     â”‚</span><br><span class="line">           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ bucket ä¸­æ²¡æ‰¾åˆ°ï¼Œå¹¶ä¸” overflow ä¸ä¸ºç©ºï¼Œè¿˜è¦ç»§ç»­å» overflow bucket ä¸­å¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æˆ–æ˜¯æ‰€æœ‰çš„ key æ§½ä½éƒ½æ‰¾éäº†ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„ overflow bucketã€‚</p><p>å®ç°ä¸Šæœ‰ mapaccess1ï¼Œmapaccess2ï¼ŒmapaccessK å‡ ä¸ªæ–¹æ³•ï¼Œä¸»è¦åŒºåˆ«æ˜¯åœ¨è¿”å›å†…å®¹ä¸Šã€‚å½“è¦æŸ¥è¯¢çš„ key ä¸åœ¨ map é‡Œï¼Œmapaccess2çš„ç”¨æ³•ä¼šè¿”å›ä¸€ä¸ª bool å‹å˜é‡æç¤º key æ˜¯å¦åœ¨ map ä¸­ï¼›è€Œmapaccess1 çš„è¯­å¥åˆ™ä¼šè¿”å›ä¸€ä¸ª key å¯¹åº” value ç±»å‹çš„é›¶å€¼ã€‚å¦‚æœ value æ˜¯ int å‹å°±ä¼šè¿”å› 0ï¼Œå¦‚æœ value æ˜¯ string ç±»å‹ï¼Œå°±ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚mapaccess2å°±æ˜¯æ—¥å¸¸ä»£ç ä¸­<code>v, ok := map[k]</code>çš„åº•å±‚å‡½æ•°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go Sliceçš„æ‰©å®¹ç­–ç•¥</title>
      <link href="2022/10/15/Go_Slice_growup/"/>
      <url>2022/10/15/Go_Slice_growup/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å†™Goçš„æ—¶å€™ï¼Œå¯¹Sliceçš„æ“ä½œå°±å¾ˆå±é™©ï¼Œç‰¹åˆ«æ˜¯å‡½æ•°å‚æ•°ä¼ çš„æ˜¯SliceæŒ‡é’ˆï¼Œä¸€ä¸å°å¿ƒå°±æ”¹äº†ã€‚åˆ‡ç‰‡æ”¯æŒå­åˆ‡ç‰‡  å’ŒåŸæœ¬åˆ‡ç‰‡å…±äº«åº•å±‚æ•°ç»„ï¼Œé‚£å­åˆ‡ç‰‡å’Œåˆ‡ç‰‡ç©¶ç«Ÿä¼šä¸ä¼šç›¸äº’å½±å“ï¼Ÿ å°±çœ‹ä»–ä»¬æ˜¯ä¸æ˜¯è¿˜å…±äº«åº•å±‚æ•°ç»„ã€‚å¦‚æœä»–ä»¬çš„ç»“æ„æ²¡æœ‰å˜åŒ–ï¼Œè‚¯å®šæ˜¯å…±äº«çš„ã€‚ç»“æ„å‘ç”Ÿå˜åŒ–(æ‰©å®¹)ï¼Œå°±å¯èƒ½ä¸å…±äº«äº†ã€‚</p><p>å¯¹å­åˆ‡ç‰‡çš„ä½¿ç”¨å»ºè®®ï¼šåªè¯»ä¸æ”¹</p><span id="more"></span><h2 id="0x0-Sliceå’ŒArrayçš„è”ç³»"><a href="#0x0-Sliceå’ŒArrayçš„è”ç³»" class="headerlink" title="0x0.Sliceå’ŒArrayçš„è”ç³»"></a>0x0.Sliceå’ŒArrayçš„è”ç³»</h2><p>slice çš„åº•å±‚æ•°æ®æ˜¯æ•°ç»„ï¼Œslice æ˜¯å¯¹æ•°ç»„çš„å°è£…ã€‚ä¸¤è€…éƒ½å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®å•ä¸ªå…ƒç´ ã€‚</p><p>æ•°ç»„å°±æ˜¯ä¸€ç‰‡è¿ç»­çš„å†…å­˜ï¼Œæ˜¯å®šé•¿çš„ï¼Œå…¶é•¿åº¦æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ [3]int å’Œ [4]int å°±æ˜¯ä¸åŒçš„ç±»å‹ã€‚</p><p>sliceå¯ä»¥åŠ¨æ€åœ°æ‰©å®¹ï¼Œåˆ‡ç‰‡çš„ç±»å‹å’Œé•¿åº¦æ— å…³ã€‚</p><p>slice æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«ä¸‰ä¸ªå­—æ®µï¼šé•¿åº¦ã€å®¹é‡ã€åº•å±‚æ•°ç»„ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">type slice struct &#123;</span><br><span class="line">array unsafe.Pointer &#x2F;&#x2F; å…ƒç´ æŒ‡é’ˆ</span><br><span class="line">len   int &#x2F;&#x2F; é•¿åº¦ </span><br><span class="line">cap   int &#x2F;&#x2F; å®¹é‡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸æ˜¯æ¯ä¸€ä¸ªSliceéƒ½æœ‰è‡ªå·±ä¸“å±çš„åº•å±‚æ•°ç»„ï¼Œåº•å±‚æ•°ç»„æ˜¯å¯ä»¥è¢«å¤šä¸ªSliceåŒæ—¶æŒ‡å‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¿®æ”¹SliceAçš„æ•°æ®æ—¶ï¼Œæœ‰å¯èƒ½SliceBçš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><h2 id="0x1-Sliceæ‰©å®¹ç­–ç•¥"><a href="#0x1-Sliceæ‰©å®¹ç­–ç•¥" class="headerlink" title="0x1.Sliceæ‰©å®¹ç­–ç•¥"></a>0x1.Sliceæ‰©å®¹ç­–ç•¥</h2><p>åœ¨golang1.18ç‰ˆæœ¬ä¹‹å‰ï¼ŒSliceçš„æ‰©å®¹ç­–ç•¥æ˜¯å½“åŸ slice å®¹é‡å°äº <code>1024</code> çš„æ—¶å€™ï¼Œæ–° slice å®¹é‡å˜æˆåŸæ¥çš„ <code>2</code> å€ï¼›åŸ slice å®¹é‡è¶…è¿‡ <code>1024</code>ï¼Œæ–° slice å®¹é‡å˜æˆåŸæ¥çš„<code>1.25</code>å€ã€‚</p><p>åœ¨golang1.18ç‰ˆæœ¬ä¹‹åï¼Œæ–°çš„Sliceæ‰©å®¹ç­–ç•¥æ˜¯å½“åŸsliceå®¹é‡(oldcap)å°äº<code>256</code>çš„æ—¶å€™ï¼Œæ–°slice(newcap)å®¹é‡ä¸ºåŸæ¥çš„<code>2</code>å€ï¼›åŸsliceå®¹é‡è¶…è¿‡<code>256</code>ï¼Œæ–°sliceå®¹é‡<code>newcap = oldcap+(oldcap+3*256)/4</code></p><blockquote><p>åœ¨å®é™…çš„æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘å†…å­˜å¯¹é½äº§ç”Ÿçš„å½±å“ï¼Œè¿™ä¸ªå’Œå†…å­˜åˆ†é…ç­–ç•¥ç›¸å…³ã€‚è¿›è¡Œå†…å­˜å¯¹é½ä¹‹åï¼Œæ–° slice çš„å®¹é‡æ˜¯è¦ <code>å¤§äºç­‰äº</code> ç†è®ºçš„æ‰©å®¹é‡ã€‚</p></blockquote><p>ç»å…¸ä¾‹é¢˜ï¼Œæ¥è‡ª<a href="https://jodezer.github.io/2017/05/golangSlice%E7%9A%84%E6%89%A9%E5%AE%B9%E8%A7%84%E5%88%99">golang Sliceçš„æ‰©å®¹è§„åˆ™</a></p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">s := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">s = <span class="built_in">append</span>(s,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;len=%d, cap=%d&quot;</span>,<span class="built_in">len</span>(s),<span class="built_in">cap</span>(s))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">len&#x3D;5, cap&#x3D;6</span><br></pre></td></tr></table></figure></blockquote>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C# GCæœºåˆ¶(Garbage Collector)</title>
      <link href="2022/02/08/CSharp_GC_mechanism/"/>
      <url>2022/02/08/CSharp_GC_mechanism/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹C#ä¸­GCçš„ç›¸å…³çŸ¥è¯†ã€‚ä¸è®°ä¸‹æ¥ï¼Œä¸‹æ¬¡åˆæ‰¾ä¸åˆ°ï¼Œå°±å¾ˆçƒ¦ã€‚</p><p>ä¸»è¦é’ˆå¯¹çš„æ˜¯C#ä¸­å¦‚ä½•åˆ¤å®šGarbageå’ŒGCçš„è¿ä½œæ–¹å¼ã€‚</p><span id="more"></span><h2 id="0x0-èµ„æºæ¦‚å¿µ"><a href="#0x0-èµ„æºæ¦‚å¿µ" class="headerlink" title="0x0.èµ„æºæ¦‚å¿µ"></a>0x0.èµ„æºæ¦‚å¿µ</h2><p>æ‰€è°“çš„èµ„æºå…¶å®å°±æ˜¯ç¨‹åºä¸­å¯ä»¥åˆ©ç”¨çš„æ•°æ®ã€‚æ¯”å¦‚å­—ç¬¦ä¸²ã€å›¾ç‰‡å’Œä»»ä½•çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p><p>æ‰˜ç®¡èµ„æºï¼Œéæ‰˜ç®¡èµ„æºï¼šæ‰˜ç®¡èµ„æºæ˜¯ç”±CLRå…¨æƒè´Ÿè´£çš„èµ„æºï¼ŒCLRä¸è´Ÿè´£çš„èµ„æºä½éæ‰˜ç®¡èµ„æºã€‚<br><strong>å¯¹äºæ‰˜ç®¡èµ„æºé€šè¿‡GCè‡ªåŠ¨æ¸…ç†å›æ”¶ã€‚å¯¹äºéæ‰˜ç®¡çš„èµ„æºï¼Œä¸€èˆ¬å°±æ˜¯Streamï¼Œæ•°æ®åº“çš„è¿æ¥ï¼Œç½‘ç»œè¿æ¥ï¼ŒGDI+çš„ç›¸å…³å¯¹è±¡ï¼Œè¿˜æœ‰Comå¯¹è±¡ç­‰ç­‰è¿™äº›æ“ä½œç³»ç»Ÿèµ„æºï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é‡Šæ”¾ï¼Œå†ç”±GCå›æ”¶ã€‚</strong>  </p><h2 id="0x1-Garbageçš„åˆ¤å®š"><a href="#0x1-Garbageçš„åˆ¤å®š" class="headerlink" title="0x1.Garbageçš„åˆ¤å®š"></a>0x1.Garbageçš„åˆ¤å®š</h2><p>.Netç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œ<strong>ä¸€ä¸ªå°±æ˜¯å€¼ç±»å‹ï¼Œå¦ä¸€ä¸ªå°±æ˜¯å¼•ç”¨ç±»å‹ã€‚å‰è€…æ˜¯åœ¨å †æ ˆä¸­åˆ†é…å†…å­˜ï¼Œå®ƒä»¬æœ‰è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥ä¸ç”¨å¯¹å®ƒä»¬è¿›è¡Œç®¡ç†ï¼Œä¼šè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ã€‚åè€…æ˜¯åœ¨å †ä¸­åˆ†é…å†…å­˜çš„ã€‚æ‰€ä»¥å®ƒçš„åˆ†é…å’Œé‡Šæ”¾å°±éœ€è¦åƒå›æ”¶æœºåˆ¶æ¥ç®¡ç†ã€‚</strong></p><p>GCçš„å…¨ç§°ä¸ºâ€œGarbage Collectorâ€,é¡¾åæ€ä¹‰å°±æ˜¯åƒåœ¾å›æ”¶å™¨ï¼Œé‚£ä¹ˆåªæœ‰è¢«ç§°ä¸ºåƒåœ¾çš„å¯¹è±¡æ‰èƒ½è¢«GCå›æ”¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ ä¸€ä¸ªå¼•ç”¨ç±»å‹å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜éœ€è¦è¢«GCå›æ”¶ï¼Œéœ€è¦å…ˆæˆä¸ºåƒåœ¾ã€‚ <strong>.Netåˆ¤å®šä¸€ä¸ªå¼•ç”¨ç±»å‹å¯¹è±¡æ˜¯åƒåœ¾ï¼Œåªéœ€è¦åˆ¤å®šæ­¤å¯¹è±¡æˆ–è€…å…¶åŒ…å«çš„å­å¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±è®¤ä¸ºå®ƒæ˜¯åƒåœ¾ã€‚</strong></p><h2 id="0x2-éæ‰˜ç®¡èµ„æºçš„é‡Šæ”¾æ–¹å¼"><a href="#0x2-éæ‰˜ç®¡èµ„æºçš„é‡Šæ”¾æ–¹å¼" class="headerlink" title="0x2.éæ‰˜ç®¡èµ„æºçš„é‡Šæ”¾æ–¹å¼"></a>0x2.éæ‰˜ç®¡èµ„æºçš„é‡Šæ”¾æ–¹å¼</h2><h3 id="1-Close"><a href="#1-Close" class="headerlink" title="1).Close()"></a>1).Close()</h3><p>å…³é—­å¯¹è±¡èµ„æºï¼Œåœ¨æ˜¾ç¤ºè°ƒç”¨æ—¶è¢«è°ƒç”¨ã€‚</p><h3 id="2-Dispose"><a href="#2-Dispose" class="headerlink" title="2).Dispose()"></a>2).Dispose()</h3><p>ç»§æ‰¿IDisposableæ¥å£ï¼Œå®ç°Disposeæ–¹æ³•ï¼›<br>ä»‹ç»ï¼šè°ƒç”¨Disposeæ–¹æ³•ï¼Œé”€æ¯å¯¹è±¡ï¼Œéœ€è¦æ˜¾ç¤ºè°ƒç”¨æˆ–è€…é€šè¿‡usingè¯­å¥ï¼Œåœ¨æ˜¾ç¤ºè°ƒç”¨æˆ–è€…ç¦»å¼€usingç¨‹åºå—æ—¶è¢«è°ƒç”¨ã€‚<br>Disposeæ–¹æ³•ç”¨äºæ¸…ç†å¯¹è±¡å°è£…çš„éæ‰˜ç®¡èµ„æºï¼Œè€Œä¸æ˜¯é‡Šæ”¾å¯¹è±¡çš„å†…å­˜ï¼Œå¯¹è±¡çš„å†…å­˜ä¾ç„¶ç”±åƒåœ¾å›æ”¶å™¨æ§åˆ¶ã€‚<br>Disposeæ–¹æ³•è°ƒç”¨ï¼Œä¸ä½†é‡Šæ”¾è¯¥ç±»çš„éæ‰˜ç®¡èµ„æºï¼Œè¿˜é‡Šæ”¾äº†å¼•ç”¨çš„ç±»çš„éæ‰˜ç®¡èµ„æºã€‚<br>Disposeæ¨¡å¼å°±æ˜¯ä¸€ç§å¼ºåˆ¶èµ„æºæ¸…ç†æ‰€è¦éµå®ˆçš„çº¦å®šï¼›Disposeæ¨¡å¼å®ç°IDisposableæ¥å£ï¼Œä»è€Œä½¿å¾—è¯¥ç±»å‹æä¾›ä¸€ä¸ªå…¬æœ‰çš„Disposeæ–¹æ³•ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è€ŒCloseä¸Disposeè¿™ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«åœ¨äºï¼Œè°ƒç”¨å®Œäº†å¯¹è±¡çš„Closeæ–¹æ³•åï¼Œæ­¤å¯¹è±¡æœ‰å¯èƒ½è¢«é‡æ–°è¿›</span><br><span class="line">è¡Œä½¿ç”¨ï¼›è€ŒDisposeæ–¹æ³•æ¥è¯´ï¼Œæ­¤å¯¹è±¡æ‰€å æœ‰çš„èµ„æºéœ€è¦è¢«æ ‡è®°ä¸ºæ— ç”¨äº†ï¼Œä¹Ÿå°±æ˜¯æ­¤å¯¹è±¡è¢«é”€æ¯äº†ï¼Œ</span><br><span class="line">ä¸èƒ½å†è¢«ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure><h3 id="3-ææ„å‡½æ•°-Finalize"><a href="#3-ææ„å‡½æ•°-Finalize" class="headerlink" title="3).ææ„å‡½æ•°/Finalize()"></a>3).ææ„å‡½æ•°/Finalize()</h3><p>å¸¦æœ‰ææ„å‡½æ•°çš„ç±»ï¼Œç”Ÿå‘½å‘¨æœŸä¼šå˜é•¿ã€‚å†…å­˜ç©ºé—´éœ€è¦ä¸¤æ¬¡åƒåœ¾å›æ”¶æ‰ä¼šè¢«é‡Šæ”¾ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><p>ä¸€ä¸ªæ­£å¸¸æƒ…å†µçš„ç±»æ˜¯ä¸ä¼šå†™ææ„å‡½æ•°çš„ï¼Œè€Œä¸€æ—¦ä¸€ä¸ªç±»å†™äº†ææ„å‡½æ•°ï¼Œå°±æ„å‘³ç€GCä¼šåœ¨ä¸ç¡®å®šçš„æ—¶é—´è°ƒç”¨è¯¥ç±»çš„ææ„å‡½æ•°ï¼Œåˆ¤æ–­è¯¥ç±»çš„èµ„æºæ˜¯å¦éœ€è¦é‡Šæ”¾ï¼Œç„¶åè°ƒç”¨Finalizeæ–¹æ³•ï¼Œå¦‚æœé‡å†™äº†Finalizeæ–¹æ³•åˆ™è°ƒç”¨é‡å†™çš„Finalizeæ–¹æ³•ã€‚<br>Finalizeæ–¹æ³•çš„ä½œç”¨æ˜¯ä¿è¯.NETå¯¹è±¡èƒ½åœ¨åƒåœ¾å›æ”¶æ—¶æ¸…é™¤éæ‰˜ç®¡èµ„æºã€‚<br>åœ¨.NETä¸­ï¼ŒObject.Finalize()æ–¹æ³•æ˜¯æ— æ³•é‡è½½çš„ï¼Œç¼–è¯‘å™¨æ˜¯æ ¹æ®ç±»çš„ææ„å‡½æ•°æ¥è‡ªåŠ¨ç”ŸæˆObject.Finalize()æ–¹æ³•çš„<br>Finalizeç”±åƒåœ¾å›æ”¶å™¨è°ƒç”¨ï¼›disposeç”±å¯¹è±¡è°ƒç”¨ã€‚<br>Finalizeæ— éœ€æ‹…å¿ƒå› ä¸ºæ²¡æœ‰è°ƒç”¨Finalizeè€Œä½¿éæ‰˜ç®¡èµ„æºå¾—ä¸åˆ°é‡Šæ”¾ï¼Œå› ä¸ºGCä¼šåœ¨ä¸ç¡®å®šæ—¶é—´è°ƒç”¨ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨Finalizeæ–¹æ³•ï¼Œè€Œdisposeå¿…é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚<br>Finalizeè™½ç„¶æ— éœ€æ‹…å¿ƒå› ä¸ºæ²¡æœ‰è°ƒç”¨Finalizeè€Œä½¿éæ‰˜ç®¡èµ„æºå¾—ä¸åˆ°é‡Šæ”¾ï¼Œä½†å› ä¸ºç”±åƒåœ¾å›æ”¶å™¨ç®¡ç†ï¼Œä¸èƒ½ä¿è¯ç«‹å³é‡Šæ”¾éæ‰˜ç®¡èµ„æºï¼›è€Œdisposeä¸€è°ƒç”¨ä¾¿é‡Šæ”¾éæ‰˜ç®¡èµ„æºã€‚<br>åªæœ‰ç±»ç±»å‹æ‰èƒ½é‡å†™Finalizeï¼Œè€Œç»“æ„ä¸èƒ½ï¼›ç±»å’Œç»“æ„éƒ½èƒ½å®ç°IDispose</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">é‡Šæ”¾æ¨¡å¼ï¼šæ˜¯ä¸€ç§å¾®è½¯å»ºè®®çš„å†™æ³•ï¼Œå…ˆæ‰‹åŠ¨æ˜¾ç¤ºå»é‡Šæ”¾èµ„æºï¼Œå¦‚æœå¿˜è®°äº†ï¼Œå†è®©finalizeé‡Šæ”¾èµ„æºã€‚</span><br><span class="line">æ‰€ä»¥å¦‚æœå·²ç»å®Œæˆäº†ææ„å‡½æ•°è¯¥å¹²çš„äº‹æƒ…(ä¾‹å¦‚é‡Šæ”¾éæ‰˜ç®¡èµ„æº)ï¼Œå°±åº”å½“ä½¿ç”¨SuppressFinalize</span><br><span class="line">æ–¹æ³•å‘Šè¯‰GCä¸éœ€è¦å†æ‰§è¡ŒæŸä¸ªå¯¹è±¡çš„ææ„å‡½æ•°ã€‚</span><br></pre></td></tr></table></figure><h2 id="0x3-GCçš„è¿ä½œæ–¹å¼"><a href="#0x3-GCçš„è¿ä½œæ–¹å¼" class="headerlink" title="0x3.GCçš„è¿ä½œæ–¹å¼"></a>0x3.GCçš„è¿ä½œæ–¹å¼</h2><p>å†…å­˜çš„é‡Šæ”¾å’Œå›æ”¶éœ€è¦ä¼´éšç€ç¨‹åºçš„è¿è¡Œï¼Œå› æ­¤ç³»ç»Ÿä¸ºGCå®‰æ’äº†ç‹¬ç«‹çš„çº¿ç¨‹ã€‚é‚£ä¹ˆGCçš„å·¥ä½œå¤§è‡´æ˜¯ï¼ŒæŸ¥è¯¢å†…å­˜ä¸­å¯¹è±¡æ˜¯å¦æˆä¸ºåƒåœ¾ï¼Œç„¶åå¯¹åƒåœ¾è¿›è¡Œé‡Šæ”¾å’Œå›æ”¶ã€‚é‚£ä¹ˆå¯¹äºGCå¯¹äºå†…å­˜å›æ”¶é‡‡å–äº†ä¸€å®šçš„ä¼˜å…ˆç®—æ³•è¿›è¡Œè½®å¾ªå›æ”¶å†…å­˜èµ„æºã€‚</p><p>å…¶æ¬¡ï¼Œ<strong>å¯¹äºå†…å­˜ä¸­çš„åƒåœ¾åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯éœ€è¦è°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œå¦ä¸€ç§æ˜¯ä¸éœ€è¦è°ƒç”¨çš„ã€‚GCå¯¹äºå‰è€…çš„å›æ”¶éœ€è¦é€šè¿‡ä¸¤æ­¥å®Œæˆï¼Œç¬¬ä¸€æ­¥æ˜¯è°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œç¬¬äºŒæ­¥æ˜¯å›æ”¶å†…å­˜ï¼Œä½†æ˜¯è¦æ³¨æ„è¿™ä¸¤æ­¥ä¸æ˜¯åœ¨GCä¸€æ¬¡è½®å¾ªå®Œæˆï¼Œå³éœ€è¦ä¸¤æ¬¡è½®å¾ªï¼›ç›¸å¯¹äºåè€…ï¼Œåˆ™åªæ˜¯å›æ”¶å†…å­˜è€Œå·²ã€‚</strong></p><p>C#ä¸­çš„GCä½¿ç”¨äº†Generationçš„æ¦‚å¿µï¼Œå®ƒå°†åˆ†é…çš„å¯¹è±¡åˆ†ä¸º3ä»£(å¯ç”¨GC.GetGenerationæ–¹æ³•è¿”å›ä»»æ„ä½œä¸ºå‚æ•°çš„å¯¹è±¡å½“å‰æ‰€å¤„çš„ä»£)ã€‚</p><p>æœ€è¿‘è¢«åˆ†é…å†…å­˜çš„å¯¹è±¡è¢«æ”¾ç½®äºç¬¬0ä»£ï¼Œå› ä¸ºç¬¬0ä»£å¾ˆå°ï¼Œå°åˆ°è¶³ä»¥æ”¾è¿›å¤„ç†å™¨çš„äºŒçº§ï¼ˆL2)ç¼“å­˜ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿæä¾›å¯¹å¯¹è±¡çš„å¿«é€Ÿå­˜å–ã€‚ç»è¿‡ä¸€è½®åƒåœ¾å›æ”¶åï¼Œä»ç„¶ä¿ç•™åœ¨ç¬¬0ä»£ä¸­çš„å¯¹è±¡è¢«ç§»è¿›ç¬¬1ä»£ä¸­ï¼Œå†ç»è¿‡ä¸€è½®åƒåœ¾å†…å­˜å›æ”¶åï¼Œä»ç„¶ä¿ç•™åœ¨ç¬¬1ä»£ä¸­çš„å¯¹è±¡åˆ™è¢«ç§»è¿›ç¬¬2ä»£ä¸­ï¼Œç¬¬2ä»£ä¸­åŒ…å«äº†ç”Ÿå­˜æœŸè¾ƒé•¿çš„å¯¹è±¡ã€‚ å½“ç¬¬0ä»£ä¸­æ²¡æœ‰å¯ä»¥åˆ†é…çš„æœ‰æ•ˆå†…å­˜æ—¶ï¼Œå°±è§¦å‘äº†ç¬¬0ä»£ä¸­çš„ä¸€è½®åƒåœ¾å›æ”¶ï¼Œå®ƒå°†åˆ é™¤é‚£äº›ä¸å†è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œå¹¶å°†å½“å‰æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡ç§»è‡³ç¬¬1ä»£ã€‚è€Œå½“ç¬¬0ä»£åƒåœ¾å›æ”¶åä¾ç„¶ä¸èƒ½è¯·æ±‚åˆ°å……è¶³çš„å†…å­˜æ—¶ï¼Œå°±å¯åŠ¨ç¬¬1ä»£åƒåœ¾å›æ”¶ã€‚å¦‚æœå¯¹å„ä»£éƒ½è¿›è¡Œäº†åƒåœ¾å›æ”¶åä»æ²¡æœ‰å¯ç”¨çš„å†…å­˜å°±ä¼šå¼•å‘ä¸€ä¸ªOutOfMemoryExceptionå¼‚å¸¸ã€‚</p><table><thead><tr><th align="center"></th><th align="center">Close</th><th align="center">Dispose</th><th align="center">ææ„å‡½æ•°</th></tr></thead><tbody><tr><td align="center"></td><td align="center">å…³é—­å¯¹è±¡èµ„æº</td><td align="center">é”€æ¯å¯¹è±¡</td><td align="center">é”€æ¯å¯¹è±¡</td></tr><tr><td align="center">è°ƒç”¨æ–¹å¼</td><td align="center">éœ€è¦æ˜¾ç¤ºè°ƒç”¨</td><td align="center">éœ€è¦æ˜¾ç¤ºè°ƒç”¨æˆ–è€…é€šè¿‡usingè¯­å¥</td><td align="center">ä¸èƒ½è¢«æ˜¾ç¤ºè°ƒç”¨ï¼Œä¼šè¢«GCè°ƒç”¨</td></tr><tr><td align="center">è°ƒç”¨æ—¶æœº</td><td align="center">åœ¨æ˜¾ç¤ºè°ƒç”¨æ—¶</td><td align="center">åœ¨æ˜¾ç¤ºè°ƒç”¨æˆ–è€…ç¦»å¼€usingç¨‹åºå—</td><td align="center">ä¸ç¡®å®š</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å·¥ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> GC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Goç‰ˆæœ¬åˆ‡æ¢</title>
      <link href="2022/01/05/Go_Version_switching/"/>
      <url>2022/01/05/Go_Version_switching/</url>
      
        <content type="html"><![CDATA[<p>çº¿ä¸Šçš„ç¨‹åºç”¨çš„æ˜¯è€ç‰ˆæœ¬çš„Go(æ¯•ç«Ÿæ¯”è¾ƒç¨³)ï¼Œè‡ªå·±åˆæƒ³å°è¯•æ–°çš„ç‰ˆæœ¬ç‰¹æ€§ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œç”µè„‘é‡Œé¢SDKçš„ç‰ˆæœ¬å°±è¶Šæ¥è¶Šå¤šäº†ï¼Œæ¯æ¬¡åˆ‡æ¢èµ·æ¥å°±å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥ç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h2 id="0x0-æ‰‹åŠ¨ç®¡ç†-ç›®å‰ä½¿ç”¨çš„åˆ‡æ¢æ–¹å¼"><a href="#0x0-æ‰‹åŠ¨ç®¡ç†-ç›®å‰ä½¿ç”¨çš„åˆ‡æ¢æ–¹å¼" class="headerlink" title="0x0.æ‰‹åŠ¨ç®¡ç†(ç›®å‰ä½¿ç”¨çš„åˆ‡æ¢æ–¹å¼)"></a>0x0.æ‰‹åŠ¨ç®¡ç†(ç›®å‰ä½¿ç”¨çš„åˆ‡æ¢æ–¹å¼)</h2><p>å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆArchiveæ–‡ä»¶go1.18beta1.darwin-amd64.tar.gz</p><p>è§£å‹ç¼©é‡å‘½ågo1.18.beta1,æ‹·è´ä¸€ä»½æ”¾åˆ°é»˜è®¤å®‰è£…è·¯å¾„<code>/usr/local/go1.18beta1</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo cp -R /User/egan/Sdks/go1.18beta1 /usr/local/go1.18beta1</span><br></pre></td></tr></table></figure><p>è¿›å…¥é»˜è®¤å®‰è£…è·¯å¾„ï¼Œåˆ›å»ºè½¯é“¾</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">sudo ln -s go1.18beta1 go</span><br></pre></td></tr></table></figure><h2 id="0x1-ç‰ˆæœ¬åˆ‡æ¢å·¥å…·"><a href="#0x1-ç‰ˆæœ¬åˆ‡æ¢å·¥å…·" class="headerlink" title="0x1.ç‰ˆæœ¬åˆ‡æ¢å·¥å…·"></a>0x1.ç‰ˆæœ¬åˆ‡æ¢å·¥å…·</h2><h3 id="1-g"><a href="#1-g" class="headerlink" title="1).g"></a>1).g</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GitHub:https:&#x2F;&#x2F;github.com&#x2F;voidint&#x2F;g</span><br></pre></td></tr></table></figure><h3 id="2-goup"><a href="#2-goup" class="headerlink" title="2).goup"></a>2).goup</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Github:https:&#x2F;&#x2F;github.com&#x2F;owenthereal&#x2F;goup</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
            <tag> ç‰ˆæœ¬åˆ‡æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#å†…å­˜æ³„éœ²</title>
      <link href="2022/01/03/CSharp_OOM/"/>
      <url>2022/01/03/CSharp_OOM/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•è‡ªå·±å¹²çš„è ¢äº‹ï¼Œè¿™ä¹Ÿæ˜¯è‡ªå·±ç¬¬ä¸€æ¬¡åœ¨å·¥ä½œä¸­å†™å‡ºæ¥å†…å­˜æ³„æ¼ã€‚å¹¸äºç¨‹åºæ²¡æœ‰ç›´æ¥ä¸Šçº¿ï¼Œä»¥åè¿˜æ˜¯è¦å¤šæµ‹è¯•æµ‹è¯•è‡ªå·±çš„ä»£ç ã€‚</p><span id="more"></span><h2 id="0x0-é—®é¢˜äº§ç”ŸåŸå› "><a href="#0x0-é—®é¢˜äº§ç”ŸåŸå› " class="headerlink" title="0x0.é—®é¢˜äº§ç”ŸåŸå› "></a>0x0.é—®é¢˜äº§ç”ŸåŸå› </h2><p>åœ¨<code>button1.Click += Button1_Click</code>ä¸­ï¼Œ(+=) æ¥ä¸ºäº‹ä»¶é™„åŠ äº‹ä»¶å¤„ç†ç¨‹åº</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Form1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    InitializeComponent();</span><br><span class="line">    button1.Click += Button1_Click;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Button1_Click</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span> &#123;</span><br><span class="line"> Â Â Â Â System.Diagnostics.Debug.Print(<span class="string">&quot;x&quot;</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">event</span> EventHandler Click;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">delegate</span> <span class="keyword">void</span> <span class="title">EventHandler</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span>;</span><br></pre></td></tr></table></figure><p>ç»™button1_Clickçš„é™„åŠ äº‹ä»¶å¤„ç†ç¨‹åºæ”¾åœ¨äº†å¿ƒè·³é‡Œé¢ï¼›</p><p>æ­¤æ¬¡æº¢å‡ºæ˜¯å› ä¸ºæ¯æ¬¡å¿ƒè·³ï¼Œåˆè¿›è¡Œäº†ä¸€æ¬¡äº‹ä»¶å¤„ç†ç¨‹åºçš„é™„åŠ ï¼Œé€ æˆä¸æ–­é™„ä»¶äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p><p>ç›´è‡³æœ€åï¼Œç‚¹å‡»ä¸€æ¬¡ï¼Œè¦è¿è¡Œ2K+æ¬¡çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p><p>è€Œäº‹ä»¶å¤„ç†ç¨‹åºçš„ä»£ç é‡Œé¢ä¼šä½¿ç”¨åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œè¿è¡Œä¸€æ¬¡ï¼Œåˆ›å»ºå¤§é‡çš„æ–°çº¿ç¨‹ï¼Œçº¿ç¨‹æ•°ç›´æ¥é£™å‡ï¼Œå†…å­˜å´©æ‰ã€‚</p><h2 id="0x1-å®šä½å†…å­˜æ³„éœ²å‘ç”Ÿçš„åœ°æ–¹ï¼š"><a href="#0x1-å®šä½å†…å­˜æ³„éœ²å‘ç”Ÿçš„åœ°æ–¹ï¼š" class="headerlink" title="0x1.å®šä½å†…å­˜æ³„éœ²å‘ç”Ÿçš„åœ°æ–¹ï¼š"></a>0x1.å®šä½å†…å­˜æ³„éœ²å‘ç”Ÿçš„åœ°æ–¹ï¼š</h2><p>C#çš„ä»£ç å¯ä»¥ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·dotMemoryã€‚dotMemoryå…è®¸ä½ åˆ†æå„ç§.NETå’Œ.NET Coreåº”ç”¨ç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼›æ¯”å¦‚æ¡Œé¢åº”ç”¨ç¨‹åºã€WindowsæœåŠ¡ã€ASP.NET Webåº”ç”¨ç¨‹åºã€IISã€IIS Expressã€ä»»æ„.NETè¿›ç¨‹ç­‰ã€‚ä¸è¿‡ä¸´æ—¶ç”¨ä¸€ä¸‹å¯ä»¥ï¼Œæœ‰30å¤©çš„è¯•ç”¨æœŸï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ã€‚</p><p>æº¢å‡ºç‰ˆæœ¬æºç ç¤ºä¾‹:</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">WindowsFormsApp1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Form1</span> : <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Form1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitializeComponent();</span><br><span class="line">            button1.Click += Button1_Click;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Cycle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            button1.Click += Button1_Click;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Button1_Click</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            i += <span class="number">1</span>;</span><br><span class="line">            System.Diagnostics.Debug.Print(<span class="string">&quot;x:&#123;0&#125;&quot;</span>,i);</span><br><span class="line">            Cycle();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¸¸ç‰ˆæœ¬æºç ç¤ºä¾‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">WindowsFormsApp1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Form1</span> : <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Form1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            InitializeComponent();</span><br><span class="line">            button1.Click += Button1_Click;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Button1_Click</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            i += <span class="number">1</span>;</span><br><span class="line">            System.Diagnostics.Debug.Print(<span class="string">&quot;x:&#123;0&#125;&quot;</span>,i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> OOM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#ä¸²å£è¯»å†™è¿ç»­æ€§é—®é¢˜</title>
      <link href="2022/01/01/CSharp_Serial_port_readwrite_continuity_problem/"/>
      <url>2022/01/01/CSharp_Serial_port_readwrite_continuity_problem/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ä¸²å£åè®®è¿›è¡Œè‡ªå®šä¹‰åè®®è¯»å†™çš„æ—¶å€™ï¼Œä¸€èˆ¬ä½¿ç”¨Asciiç¼–ç ã€‚ä½†æ˜¯ä¸²å£ä¸­è¯»å–åˆ°çš„æ•°æ®å¹¶ä¸èƒ½ä¿è¯å…¶å®Œæ•´æ€§ã€‚ä¸€æ¡æŒ‡ä»¤æœ‰å¯èƒ½ä¼šè¢«æ‹†åˆ†æˆå¤šæ¡æ•°æ®å‘é€ï¼Œè¯»å–åˆ°çš„å­—ç¬¦ä¸²æœ‰å¯èƒ½åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ä¸€èˆ¬ä¸€æ¡æŒ‡ä»¤çš„æœ«å°¾éƒ½ä¼šåŠ ä¸Š\n\rä½œä¸ºç»“æŸç¬¦ã€‚</p><span id="more"></span><h2 id="0x0-åˆ›å»ºè¿æ¥"><a href="#0x0-åˆ›å»ºè¿æ¥" class="headerlink" title="0x0.åˆ›å»ºè¿æ¥"></a>0x0.åˆ›å»ºè¿æ¥</h2><p>ä¸²å£ä½¿ç”¨System.IO.Ports.SerialPortæ¥åˆ›å»ºè¿æ¥</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ‘˜è¦:</span></span><br><span class="line"><span class="comment">//     ä½¿ç”¨æŒ‡å®šçš„ç«¯å£åã€æ³¢ç‰¹ç‡ã€å¥‡å¶æ ¡éªŒä½ã€æ•°æ®ä½å’Œåœæ­¢ä½åˆå§‹åŒ– System.IO.Ports.SerialPort ç±»çš„æ–°å®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// å‚æ•°:</span></span><br><span class="line"><span class="comment">//   portName:</span></span><br><span class="line"><span class="comment">//     è¦ä½¿ç”¨çš„ç«¯å£ï¼ˆä¾‹å¦‚ COM1ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   baudRate:</span></span><br><span class="line"><span class="comment">//     æ³¢ç‰¹ç‡ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   parity:</span></span><br><span class="line"><span class="comment">//     System.IO.Ports.SerialPort.Parity å€¼ä¹‹ä¸€ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   dataBits:</span></span><br><span class="line"><span class="comment">//     æ•°æ®ä½å€¼ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   stopBits:</span></span><br><span class="line"><span class="comment">//     System.IO.Ports.SerialPort.StopBits å€¼ä¹‹ä¸€ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// å¼‚å¸¸:</span></span><br><span class="line"><span class="comment">//   T:System.IO.IOException:</span></span><br><span class="line"><span class="comment">//     æœªèƒ½æ‰¾åˆ°æˆ–æ‰“å¼€æŒ‡å®šçš„ç«¯å£ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SerialPort</span>(<span class="params"><span class="built_in">string</span> portName, <span class="built_in">int</span> baudRate, Parity parity, <span class="built_in">int</span> dataBits, StopBits stopBits</span>)</span>;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­Parityå’ŒStopBitsçš„æšä¸¾åˆ†åˆ«ä¸ºï¼š</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ‘˜è¦:</span></span><br><span class="line"><span class="comment">// æŒ‡å®š System.IO.Ports.SerialPort å¯¹è±¡çš„å¥‡å¶æ ¡éªŒä½ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Parity</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// ä¸å‘ç”Ÿå¥‡å¶æ ¡éªŒæ£€æŸ¥ã€‚</span></span><br><span class="line">    None = <span class="number">0</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// è®¾ç½®å¥‡å¶æ ¡éªŒä½ï¼Œä½¿ä½æ•°ç­‰äºå¥‡æ•°ã€‚</span></span><br><span class="line">    Odd = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// è®¾ç½®å¥‡å¶æ ¡éªŒä½ï¼Œä½¿ä½æ•°ç­‰äºå¶æ•°ã€‚</span></span><br><span class="line">    Even = <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// å°†å¥‡å¶æ ¡éªŒä½ä¿ç•™ä¸º 1ã€‚</span></span><br><span class="line">    Mark = <span class="number">3</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// å°†å¥‡å¶æ ¡éªŒä½ä¿ç•™ä¸º 0ã€‚</span></span><br><span class="line">    Space = <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ‘˜è¦:</span></span><br><span class="line"><span class="comment">// æŒ‡å®šåœ¨ System.IO.Ports.SerialPort å¯¹è±¡ä¸Šä½¿ç”¨çš„åœæ­¢ä½çš„æ•°ç›®ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> StopBits</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// ä¸ä½¿ç”¨åœæ­¢ä½ã€‚ System.IO.Ports.SerialPort.StopBits å±æ€§ä¸æ”¯æŒæ­¤å€¼ã€‚</span></span><br><span class="line">    None = <span class="number">0</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸€ä¸ªåœæ­¢ä½ã€‚</span></span><br><span class="line">    One = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸¤ä¸ªåœæ­¢ä½ã€‚</span></span><br><span class="line">    Two = <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// æ‘˜è¦:</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ 1.5 ä¸ªåœæ­¢ä½ã€‚</span></span><br><span class="line">    OnePointFive = <span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿æ¥å®Œæˆåéœ€è¦ä¿è¯ç«¯å£çš„å¼€å¯ï¼Œå¯ä½¿ç”¨IsOpenå‚æ•°è¿›è¡Œåˆ¤å®šã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!Conn.IsOpen)</span><br><span class="line">&#123;</span><br><span class="line">    Conn.Open();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0x1-æ•°æ®çš„è¯»å†™éƒ¨åˆ†"><a href="#0x1-æ•°æ®çš„è¯»å†™éƒ¨åˆ†" class="headerlink" title="0x1.æ•°æ®çš„è¯»å†™éƒ¨åˆ†"></a>0x1.æ•°æ®çš„è¯»å†™éƒ¨åˆ†</h2><p>ä½•æ—¶åœæ­¢è¯»å†™ï¼Œå¯ä»¥æ ¹æ®NewLineçš„å€¼è¿›è¡Œåˆ¤å®šã€‚NewLineçš„é»˜è®¤å€¼æ˜¯â€\nâ€æ¢è¡Œç¬¦ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œæ›´æ”¹ã€‚â€\r\nâ€ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„NewLineã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ‘˜è¦:</span></span><br><span class="line"><span class="comment">//     è·å–æˆ–è®¾ç½®ç”¨äºè§£é‡Š System.IO.Ports.SerialPort.ReadLine å’Œ System.IO.Ports.SerialPort.WriteLine(System.String)</span></span><br><span class="line"><span class="comment">//     æ–¹æ³•è°ƒç”¨ç»“æŸçš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// è¿”å›ç»“æœ:</span></span><br><span class="line"><span class="comment">//     è¡¨ç¤ºè¡Œå°¾çš„å€¼ã€‚ é»˜è®¤å€¼ä¸ºæ¢è¡Œç¬¦ï¼ŒSystem.Environment.NewLineã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// å¼‚å¸¸:</span></span><br><span class="line"><span class="comment">//   T:System.ArgumentException:</span></span><br><span class="line"><span class="comment">//     å±æ€§å€¼ä¸ºç©ºã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   T:System.ArgumentNullException:</span></span><br><span class="line"><span class="comment">//     å±æ€§å€¼ä¸º nullã€‚</span></span><br><span class="line">[<span class="meta">Browsable(false)</span>]</span><br><span class="line">[<span class="meta">DefaultValue(<span class="meta-string">&quot;\n&quot;</span>)</span>]</span><br><span class="line">[<span class="meta">MonitoringDescription(<span class="meta-string">&quot;NewLine&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> NewLine &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æƒ³ç›´æ¥è®¾ç½®NewLineï¼Œä¹Ÿå¯ä»¥åœ¨è¯»å–ä¸²å£æ•°æ®æ—¶ï¼Œæ ¹æ®è‡ªå®šä¹‰å­—ç¬¦è¿›è¡Œè¯»å–åˆ’åˆ†ã€‚</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// æ‘˜è¦:</span></span><br><span class="line"><span class="comment">//     ä¸€ç›´è¯»å–åˆ°è¾“å…¥ç¼“å†²åŒºä¸­çš„æŒ‡å®š value çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// å‚æ•°:</span></span><br><span class="line"><span class="comment">//   value:</span></span><br><span class="line"><span class="comment">//     æŒ‡ç¤ºè¯»å–æ“ä½œåœæ­¢ä½ç½®çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// è¿”å›ç»“æœ:</span></span><br><span class="line"><span class="comment">//     è¾“å…¥ç¼“å†²åŒºä¸­ç›´åˆ°æŒ‡å®š value çš„å†…å®¹ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// å¼‚å¸¸:</span></span><br><span class="line"><span class="comment">//   T:System.ArgumentException:</span></span><br><span class="line"><span class="comment">//     value å‚æ•°çš„é•¿åº¦ä¸º 0ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   T:System.ArgumentNullException:</span></span><br><span class="line"><span class="comment">//     value å‚æ•°ä¸º nullã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   T:System.InvalidOperationException:</span></span><br><span class="line"><span class="comment">//     æŒ‡å®šçš„ç«¯å£æœªæ‰“å¼€ã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//   T:System.TimeoutException:</span></span><br><span class="line"><span class="comment">//     è¯¥æ“ä½œæœªåœ¨è¶…æ—¶æ—¶é—´åˆ°æœŸä¹‹å‰å®Œæˆã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">ReadTo</span>(<span class="params"><span class="built_in">string</span> <span class="keyword">value</span></span>)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> reqStr = Conn.ReadTo(<span class="string">&quot;\r\n&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ ·è¯»å–å‡ºæ¥çš„æ•°æ®å°±å¯ä»¥æ—¶ä¸€æ¡æ¡å®Œæ•´çš„æŒ‡ä»¤ï¼Œè€Œä¸ä¼šå‡ºç°è¢«åˆ†éš”çš„æŒ‡ä»¤ç‰‡æ®µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> Serial </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸ºODç¬”è¯•</title>
      <link href="2021/03/09/Huawei_OD_exam/"/>
      <url>2021/03/09/Huawei_OD_exam/</url>
      
        <content type="html"><![CDATA[<p>ç¬¬ä¸€æ¬¡å‚åŠ åä¸ºODçš„ç¬”è¯•ï¼Œä½œä¸ºå‚åŠ è¿‡<del>ç²¾è‹±</del>ç¬”è¯•çš„ä¼˜ç§€é’å¹´ã€‚æˆ‘è¿˜æ˜¯æƒ³è®°å½•ä¸€ä¸‹çš„ã€‚è¯´å®è¯é¢˜ç›®è¿˜è¡Œï¼Œä½†æ˜¯è£¸è€ƒè¿˜æ˜¯æœ‰ç‚¹éš¾åº¦çš„(ä¸ªäººè§‚ç‚¹ï¼Œæˆ–è®¸æ˜¯æˆ‘èœçš„è¿‡åˆ†äº†)ã€‚</p><span id="more"></span><h2 id="0x0-ç¬¬ä¸€é¢˜"><a href="#0x0-ç¬¬ä¸€é¢˜" class="headerlink" title="0x0.ç¬¬ä¸€é¢˜"></a>0x0.ç¬¬ä¸€é¢˜</h2><p>ç”¨ä¸€ä¸ªæ•°ç»„Aï¼Œä»£è¡¨ç¨‹åºå‘˜çš„å·¥ä½œèƒ½åŠ›ã€‚å…¬å¸æƒ³é€šè¿‡ç»“å¯¹ç¼–ç¨‹çš„æ¨¡å¼æ¥æé«˜å‘˜å·¥çš„å·¥ä½œèƒ½åŠ›ï¼Œå‡è®¾æˆå¯¹åçš„èƒ½åŠ›æ˜¯ä¸¤ä¸ªå‘˜å·¥çš„èƒ½åŠ›ä¹‹å’Œï¼Œæ±‚ä¸€å…±æœ‰å¤šå°‘ç§ç»“å¯¹æ–¹å¼ï¼Œä½¿ç»“å¯¹åçš„èƒ½åŠ›ä¸ºNã€‚</p><p><strong>æç¤ºï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. ç¬¬ä¸€è¡Œä»£è¡¨å‘˜å·¥ä¸ªæ•°</span><br><span class="line">2. ç¬¬äºŒè¡Œä»£è¡¨å„ä¸ªå‘˜å·¥çš„èƒ½åŠ›å€¼</span><br><span class="line">3. ç¬¬ä¸‰è¡Œä»£è¡¨ç»“å¯¹åçš„èƒ½åŠ›å€¼N</span><br><span class="line">4. è¾“å‡ºä¸ºç»“å¯¹çš„ç»„åˆæ–¹å¼çš„å€¼</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">5</span><br><span class="line">1 2 2 2 3</span><br><span class="line">4</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="1-è§£é¢˜æ€è·¯"><a href="#1-è§£é¢˜æ€è·¯" class="headerlink" title="1).è§£é¢˜æ€è·¯"></a>1).è§£é¢˜æ€è·¯</h3><p>è¯´å®è¯è¿™é¢˜æ”¾åœ¨åä¸ºODçš„ç¬”è¯•é‡Œé¢ï¼Œåº”è¯¥æ˜¯å±äºé€åˆ†é¢˜ï¼Œä¸€ä¸ªè¾“å…¥æ•°ç»„åŠ ä¸¤å±‚forå¾ªç¯ç›´æ¥è§£å°±è¡Œï¼Œç›´æ¥é™„ä¸Šä»£ç å°±ç®—äº†ã€‚</p><h3 id="2-ä»£ç å®ç°"><a href="#2-ä»£ç å®ç°" class="headerlink" title="2).ä»£ç å®ç°"></a>2).ä»£ç å®ç°</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  main.cpp</span></span><br><span class="line"><span class="comment">//  Demo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Egan.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,N;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">1001</span>];</span><br><span class="line">    <span class="keyword">int</span> count =<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x =<span class="number">0</span>; x &lt; n; x++ )&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> y= x+<span class="number">1</span>; y &lt;n; y++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[x]+arr[y] == N)</span><br><span class="line">                count += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; count &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0x1-é”™è¯¯çš„é‡Œç¨‹è¡¨"><a href="#0x1-é”™è¯¯çš„é‡Œç¨‹è¡¨" class="headerlink" title="0x1.é”™è¯¯çš„é‡Œç¨‹è¡¨"></a>0x1.é”™è¯¯çš„é‡Œç¨‹è¡¨</h2><p>ä¸€ä¸ªæ±½è½¦é‡Œç¨‹è¡¨ï¼Œå®ƒä»¥æ•´æ•°å½¢å¼æ˜¾ç¤ºè¡Œé©¶çš„è‹±é‡Œæ•°ã€‚ç„¶è€Œï¼Œé‡Œç¨‹è¡¨æœ‰ä¸€ä¸ªç¼ºé™·:å®ƒä»æ•°å­—3è½¬åˆ°æ•°å­—5ï¼Œæ€»æ˜¯è·³è¿‡æ•°å­—4ã€‚è¿™ä¸ªç¼ºé™·å‡ºç°åœ¨æ‰€æœ‰çš„ä½ç½®(1,10,100ï¼Œç­‰ç­‰)ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé‡Œç¨‹è¡¨æ˜¾ç¤ºä¸º15339ï¼Œè€Œæ±½è½¦è¡Œé©¶äº†1è‹±é‡Œï¼Œé‡Œç¨‹è¡¨çš„è¯»æ•°å°†æ›´æ”¹ä¸º15350(è€Œä¸æ˜¯15340)ã€‚</p><p><strong>æç¤ºï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. è¾“å…¥ä¸ºé‡Œç¨‹è¡¨ä¸Šçš„æ•°å€¼</span><br><span class="line">2. è¾“å‡ºä¸ºå®é™…è½¦å­è¡Œé©¶çš„æ•°å€¼</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥1ï¼š5</span><br><span class="line">è¾“å‡º1ï¼š3</span><br><span class="line">è¾“å…¥2ï¼š17</span><br><span class="line">è¾“å‡º2ï¼š15</span><br><span class="line">è¾“å…¥3ï¼š100</span><br><span class="line">è¾“å‡º3ï¼š81</span><br></pre></td></tr></table></figure><h3 id="1-è§£é¢˜æ€è·¯-1"><a href="#1-è§£é¢˜æ€è·¯-1" class="headerlink" title="1).è§£é¢˜æ€è·¯"></a>1).è§£é¢˜æ€è·¯</h3><p>é‡åˆ°4åˆ™ç›´æ¥ä»3è¿›ä½åˆ°5ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€é“å…¸å‹çš„è¿›åˆ¶è½¬åŒ–é—®é¢˜ï¼Œéå†è¯¥æ•°å­—çš„æ¯ä¸€ä½ï¼ˆå¦‚æœè¿™ä¸€ä½çš„æ•°å­—æ¯”4å¤§ï¼Œå°±è¦å‡å»1ï¼Œå› ä¸ºè¿™ä¸ªä½è·³è¿‡äº†ä¸€ä¸ª4ï¼‰ï¼Œç„¶åå†éå†è¯¥æ•°å­—çš„æ¯ä¸€ä½ï¼Œå°†å…¶è½¬åŒ–ä¸º10è¿›åˆ¶ã€‚</p><h3 id="2-ä»£ç å®ç°-1"><a href="#2-ä»£ç å®ç°-1" class="headerlink" title="2).ä»£ç å®ç°"></a>2).ä»£ç å®ç°</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  main.cpp</span></span><br><span class="line"><span class="comment">//  Demo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Egan.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">if</span>(n[<span class="number">0</span>] == <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> j = n.size;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> num = <span class="number">0</span>; ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> m = j<span class="number">-1</span>; m &gt;= <span class="number">0</span>; m--) &#123;</span><br><span class="line">            <span class="keyword">if</span>((n[m]-<span class="string">&#x27;0&#x27;</span>)&gt;<span class="number">4</span>)&#123;</span><br><span class="line">                num += ((n[m]-<span class="string">&#x27;0&#x27;</span>)<span class="number">-1</span>) * ans;</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                num += (n[m]-<span class="string">&#x27;0&#x27;</span>) * ans;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = ans * <span class="number">9</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;:&quot;</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="0x2-è´ªåƒè›‡ç®—æ³•"><a href="#0x2-è´ªåƒè›‡ç®—æ³•" class="headerlink" title="0x2.è´ªåƒè›‡ç®—æ³•"></a>0x2.è´ªåƒè›‡ç®—æ³•</h2><p>é¢˜ç›®å¤ªé•¿ï¼Œå…·ä½“çš„è®°ä¸æ¸…æ¥šäº†ï¼Œåªèƒ½å¤§è‡´çš„æè¿°ä¸€ä¸‹ã€‚ã€‚ã€‚ã€‚</p><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦çŸ©é˜µï¼Œå…¶ä¸­å­—ç¬¦Eæ˜¯é£Ÿç‰©(è›‡åƒäº†é•¿åº¦+1çš„é‚£ç§)ï¼ŒFæ˜¯ç©ºç™½ï¼ŒHæ˜¯è›‡çš„ä½ç½®(åˆå§‹åªå ä¸€ä¸ªä½ç½®)</p><p>ç§»åŠ¨æŒ‡ä»¤æœ‰5ç§ï¼Œåˆ†åˆ«è®©è´ªåƒè›‡ç§»åŠ¨ä»¥åŠè½¬å‘ï¼šGå‰è¿›ã€Uå¾€ä¸Šè½¬ã€Då¾€ä¸‹è½¬ã€Lå¾€å·¦è½¬ã€Rå¾€å³è½¬ï¼ˆåˆå§‹æ–¹å‘ä¸ºå·¦ï¼‰</p><p>ç»“æŸæ¡ä»¶æ˜¯ç¢°å£æˆ–è€…ç¢°åˆ°è‡ªå·±å°±ç®—æ­»äº†ã€‚ </p><p>æ±‚æŒ‰è¾“å…¥çš„æŒ‡ä»¤æ‰§è¡Œä¹‹åçš„è›‡çš„é•¿åº¦ã€‚</p><p><strong>è¾“å…¥è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">D G G</span><br><span class="line">3</span><br><span class="line">F E F</span><br><span class="line">E E H</span><br><span class="line">F F F</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸ </category>
          
          <category> å·¥ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> åä¸ºOD </tag>
            
            <tag> ç¬”è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºç¡€è®¡ç®—å™¨II (Basic calculator II)</title>
      <link href="2021/03/02/Basic_calculator_II/"/>
      <url>2021/03/02/Basic_calculator_II/</url>
      
        <content type="html"><![CDATA[<p>æ ˆçš„ç»å…¸åº”ç”¨ï¼š</p><p>ç»™ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ <code>s</code> ï¼Œå®ç°ä¸€ä¸ªåŸºæœ¬è®¡ç®—å™¨æ¥è®¡ç®—å¹¶è¿”å›å®ƒçš„å€¼ã€‚(æ•´æ•°é™¤æ³•ä»…ä¿ç•™æ•´æ•°éƒ¨åˆ†)</p><span id="more"></span><p><strong>æç¤ºï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 1 &lt;&#x3D; s.length &lt;&#x3D; 3 * 10^5</span><br><span class="line">2. s ç”±æ•´æ•°å’Œç®—ç¬¦(&#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;&#x2F;&#39;)ç»„æˆ,ä¸­é—´ç”±ä¸€äº›ç©ºæ ¼éš”å¼€</span><br><span class="line">3. s è¡¨ç¤ºä¸€ä¸ªæœ‰æ•ˆè¡¨è¾¾å¼</span><br><span class="line">4. è¡¨è¾¾å¼ä¸­çš„æ‰€æœ‰æ•´æ•°éƒ½æ˜¯éè´Ÿæ•´æ•°,ä¸”åœ¨èŒƒå›´[0, 231 - 1]å†…</span><br><span class="line">5. é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆæ˜¯ä¸€ä¸ª32-bitæ•´æ•°</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs &#x3D; &quot;3+2*2&quot;</span><br><span class="line">è¾“å‡ºï¼š7</span><br></pre></td></tr></table></figure><h2 id="0x0-è§£é¢˜æ€è·¯"><a href="#0x0-è§£é¢˜æ€è·¯" class="headerlink" title="0x0.è§£é¢˜æ€è·¯"></a>0x0.è§£é¢˜æ€è·¯</h2><p>æ ˆçš„ç»å…¸åº”ç”¨ï¼Œæ­¤é¢˜æ²¡æœ‰æ‹¬å·ï¼Œä¸éœ€è¦è¿›è¡Œæ‹¬å·åŒ¹é…ï¼Œç›¸å¯¹æ¥è¯´ç®€å•ä¸€ç‚¹ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œæš´åŠ›æ±‚è§£ã€‚</p><ol><li><p>éœ€è¦è€ƒè™‘è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é—®é¢˜ã€‚ä¹˜é™¤çš„ä¼˜å…ˆçº§å¤§äºåŠ å‡ï¼Œå¯ä»¥å…ˆè¿›è¡Œä¹˜é™¤è¿ç®—ï¼Œç”¨ä¸€ä¸ªæ ˆï¼Œä¿å­˜è¿›è¡Œä¹˜é™¤è¿ç®—åçš„æ•´æ•°çš„å€¼ã€‚å¯¹äºåŠ å‡å·åçš„æ•°å­—ï¼Œå°†å…¶ç›´æ¥å‹å…¥æ ˆä¸­ï¼›å¯¹äºä¹˜é™¤å·åçš„æ•°å­—ï¼Œç›´æ¥ä¸æ ˆé¡¶å…ƒç´ è®¡ç®—ï¼Œå¹¶æ›¿æ¢æ ˆé¡¶å…ƒç´ ä¸ºè®¡ç®—åçš„ç»“æœã€‚</p></li><li><p>éå†å­—ç¬¦ä¸² sï¼Œå¹¶ç”¨å˜é‡preSignè®°å½•æ¯ä¸ªæ•°å­—ä¹‹å‰çš„è¿ç®—ç¬¦ï¼Œå¯¹äºç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå…¶ä¹‹å‰çš„è¿ç®—ç¬¦è§†ä¸ºåŠ å·ã€‚éå†åˆ°è¿ç®—ç¬¦æˆ–è€…å­—ç¬¦ä¸²æœ€åä¸€ä½æ—¶ï¼Œæ ¹æ®preSignæ¥å†³å®šè®¡ç®—æ–¹å¼:</p><ul><li><p>åŠ å·ï¼šæ•°å­—ç›´æ¥å…¥æ ˆï¼›</p></li><li><p>å‡å·ï¼šnumå˜(-num)å…¥æ ˆï¼›</p></li><li><p>ä¹˜é™¤ï¼šnum ( * or / ) stack.back()ï¼Œå¹¶å°†æ ˆé¡¶å…ƒç´ æ›¿æ¢ä¸ºè¿ç®—ç»“æœã€‚</p></li></ul></li></ol><h2 id="0x1-å¤æ‚åº¦åˆ†æ"><a href="#0x1-å¤æ‚åº¦åˆ†æ" class="headerlink" title="0x1.å¤æ‚åº¦åˆ†æ"></a>0x1.å¤æ‚åº¦åˆ†æ</h2><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­nä¸ºå­—ç¬¦ä¸²sçš„é•¿åº¦ã€‚éœ€è¦éå†å­—ç¬¦ä¸²sä¸€æ¬¡ï¼Œè®¡ç®—è¡¨è¾¾å¼çš„å€¼ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­nä¸ºå­—ç¬¦ä¸²sçš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºæ ˆçš„ç©ºé—´ï¼Œæ ˆçš„å…ƒç´ ä¸ªæ•°ä¸è¶…è¿‡nã€‚</p></li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯</p><ul><li>åœ¨è¿ç®—çš„æ—¶å€™ï¼Œåˆ¤æ–­å­—ç¬¦æ˜¯æ•°å­—è¿˜æ˜¯è¿ç®—ç¬¦çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨<code>isdigit()</code>å‡½æ•°ï¼Œæ­¤å‡½æ•°åŒ…å«åœ¨å¤´æ–‡ä»¶<code>#include &lt;cctype&gt;</code>ä¸­ã€‚</li><li>è¿ç®—çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°çš„æ•°æ˜¯å¤§æ•°(ä¸¤ä½æ•°åŠä»¥ä¸Šçš„)ï¼Œéœ€è¦è¿›è¡Œå¤„ç†ã€‚å¤§æ•°åœ¨å­—ç¬¦ä¸²ä¸­æ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œéœ€è¦åœ¨éå†å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨<code>num = num * 10 + int (s[i] - &#39;0&#39;);</code>å¯¹å¤§æ•°è¿›è¡Œå¤„ç†ã€‚</li><li>åœ¨ä¹˜é™¤è¿ç®—çš„ç»“æœéƒ½æ¨¡æ‹Ÿå…¥æ ˆä¹‹åï¼Œä½¿ç”¨ç´¯åŠ å‡½æ•°<code>accumulate(st.begin(), st.end(), 0);</code>å¯¹æ•°ç»„è¿›è¡Œç´¯åŠ å¤„ç†ï¼Œ<code>accumulate()</code>å‡½æ•°åŒ…å«åœ¨å¤´æ–‡ä»¶<code>#include &lt;numeric&gt;</code>ä¸­ï¼Œç´¯åŠ è¿‡ç¨‹ä¸­ï¼Œæ­£è´Ÿæ•°éƒ½å¯ä»¥å¤„ç†ã€‚</li></ul><h2 id="0x2-ä»£ç å®ç°"><a href="#0x2-ä»£ç å®ç°" class="headerlink" title="0x2.ä»£ç å®ç°"></a>0x2.ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  main.cpp</span></span><br><span class="line"><span class="comment">//  Demo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Egan.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; st; <span class="comment">//digits</span></span><br><span class="line">        <span class="keyword">char</span> ps = <span class="string">&#x27;+&#x27;</span>; <span class="comment">//presign</span></span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">isdigit</span>(s[i]))&#123; <span class="comment">//#include &lt;cctype&gt;</span></span><br><span class="line">                num = num * <span class="number">10</span> + <span class="keyword">int</span> (s[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">isdigit</span>(s[i]) &amp;&amp; s[i] != <span class="string">&#x27; &#x27;</span> || i == s.length()<span class="number">-1</span>)&#123;</span><br><span class="line">                <span class="keyword">switch</span>(ps)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span> :</span><br><span class="line">                        st.push_back(num);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span> :</span><br><span class="line">                        st.push_back(-num);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span> :</span><br><span class="line">                        st.back() *= num;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span> :</span><br><span class="line">                        st.back() /= num;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                ps = s[i];</span><br><span class="line">                num = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> accumulate(st.begin(), st.end(), <span class="number">0</span>); <span class="comment">//#include&lt;numeric&gt;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Leetcode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
            <tag> C++ </tag>
            
            <tag> Leetcode </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€†æ³¢å…°è¡¨ç¤ºæ³•(Reverse Polish notation)</title>
      <link href="2021/03/01/Reverse%20Polish%20notation/"/>
      <url>2021/03/01/Reverse%20Polish%20notation/</url>
      
        <content type="html"><![CDATA[<p>æ ¹æ®é€†æ³¢å…°è¡¨ç¤ºæ³•ï¼Œæ±‚è¡¨è¾¾å¼çš„å€¼ã€‚</p><p>æœ‰æ•ˆçš„è¿ç®—ç¬¦åŒ…æ‹¬ <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚</p><span id="more"></span><h2 id="0x0-è§£é¢˜æ€è·¯"><a href="#0x0-è§£é¢˜æ€è·¯" class="headerlink" title="0x0.è§£é¢˜æ€è·¯"></a>0x0.è§£é¢˜æ€è·¯</h2><p>é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§åç¼€è¡¨è¾¾å¼ï¼Œæ‰€è°“åç¼€å°±æ˜¯æŒ‡ç®—ç¬¦å†™åœ¨åé¢ã€‚</p><p>é€†æ³¢å…°è¡¨è¾¾å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š</p><ul><li><p>å»æ‰æ‹¬å·åè¡¨è¾¾å¼æ— æ­§ä¹‰ï¼Œ<code>( 1 + 2 ) * ( 3 + 4 )</code>å³ä¾¿å†™æˆ <code>1 2 + 3 4 + * </code>ä¹Ÿå¯ä»¥ä¾æ®æ¬¡åºè®¡ç®—å‡ºæ­£ç¡®ç»“æœã€‚</p></li><li><p>é€‚åˆç”¨æ ˆæ“ä½œè¿ç®—</p></li></ul><p>é€†æ³¢å…°è¡¨è¾¾å¼çš„æ±‚è§£æ˜¯æ ˆçš„ç»å…¸åº”ç”¨ã€‚æ‰€ä»¥æ­¤é¢˜é‡‡ç”¨æ ˆæ¥è§£å†³ï¼Œé‡åˆ°æ•°å­—åˆ™å…¥æ ˆï¼Œé‡åˆ°è¿ç®—ç¬¦åˆ™å–å‡º<strong>æ ˆé¡¶ä¸¤ä¸ªæ•°å­—</strong>è¿›è¡Œè¿ç®—ï¼Œ<strong>å¹¶å°†ç»“æœå‹å…¥æ ˆä¸­</strong>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯</p><ul><li><p>åœ¨è¿ç®—çš„æ—¶å€™ï¼Œéœ€è¦åå–å‡ºçš„æ•°å­—åœ¨å‰ï¼Œå…ˆå–å‡ºçš„æ•°å­—åœ¨åï¼Œå³num2åœ¨å‰ã€‚</p></li><li><p><code>stoi</code>è¡¨ç¤º<code>string to int</code>ï¼Œå³å­—ç¬¦ä¸²è½¬æ•´æ•°</p></li></ul><h2 id="0x1-ä»£ç å®ç°"><a href="#0x1-ä»£ç å®ç°" class="headerlink" title="0x1.ä»£ç å®ç°"></a>0x1.ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  main.cpp</span></span><br><span class="line"><span class="comment">//  Demo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Egan.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">evalRPN</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; tokens)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;tokens.size(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(tokens[i] == <span class="string">&quot;+&quot;</span>||tokens[i] == <span class="string">&quot;-&quot;</span>||tokens[i] == <span class="string">&quot;*&quot;</span>||tokens[i] == <span class="string">&quot;/&quot;</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> num1 = s.top();</span><br><span class="line">                s.pop();</span><br><span class="line">                <span class="keyword">int</span> num2 = s.top();</span><br><span class="line">                s.pop();</span><br><span class="line">                <span class="keyword">if</span>(tokens[i] == <span class="string">&quot;+&quot;</span>) s.push(num2 + num1);</span><br><span class="line">                <span class="keyword">if</span>(tokens[i] == <span class="string">&quot;-&quot;</span>) s.push(num2 - num1);</span><br><span class="line">                <span class="keyword">if</span>(tokens[i] == <span class="string">&quot;*&quot;</span>) s.push(num2 * num1);</span><br><span class="line">                <span class="keyword">if</span>(tokens[i] == <span class="string">&quot;/&quot;</span>) s.push(num2 / num1);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                s.push(stoi(tokens[i]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = s.top();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Leetcode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
            <tag> C++ </tag>
            
            <tag> Leetcode </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜æ˜çš„éšæœºæ•°(Ming&#39;s random numbers)</title>
      <link href="2021/02/22/Ming&#39;s_random_numbers/"/>
      <url>2021/02/22/Ming&#39;s_random_numbers/</url>
      
        <content type="html"><![CDATA[<p>æ˜æ˜æƒ³åœ¨å­¦æ ¡ä¸­è¯·ä¸€äº›åŒå­¦ä¸€èµ·åšä¸€é¡¹é—®å·è°ƒæŸ¥ï¼Œä¸ºäº†å®éªŒçš„å®¢è§‚æ€§ï¼Œä»–å…ˆç”¨è®¡ç®—æœºç”Ÿæˆäº†Nä¸ª1åˆ°1000ä¹‹é—´çš„éšæœºæ•´æ•°ï¼ˆNâ‰¤1000ï¼‰ï¼Œå¯¹äºå…¶ä¸­é‡å¤çš„æ•°å­—ï¼Œåªä¿ç•™ä¸€ä¸ªï¼ŒæŠŠå…¶ä½™ç›¸åŒçš„æ•°å»æ‰ï¼Œä¸åŒçš„æ•°å¯¹åº”ç€ä¸åŒçš„å­¦ç”Ÿçš„å­¦å·ã€‚ç„¶åå†æŠŠè¿™äº›æ•°ä»å°åˆ°å¤§æ’åºï¼ŒæŒ‰ç…§æ’å¥½çš„é¡ºåºå»æ‰¾åŒå­¦åšè°ƒæŸ¥ã€‚è¯·ä½ ååŠ©æ˜æ˜å®Œæˆâ€œå»é‡â€ä¸â€œæ’åºâ€çš„å·¥ä½œ(åŒä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹é‡Œå¯èƒ½ä¼šæœ‰å¤šç»„æ•°æ®(ç”¨äºä¸åŒçš„è°ƒæŸ¥)ï¼Œå¸Œæœ›å¤§å®¶èƒ½æ­£ç¡®å¤„ç†)</p><span id="more"></span><h2 id="0x0-è§£é¢˜æ€è·¯"><a href="#0x0-è§£é¢˜æ€è·¯" class="headerlink" title="0x0.è§£é¢˜æ€è·¯"></a>0x0.è§£é¢˜æ€è·¯</h2><p>è¿™æ˜¯åä¸ºçš„ä¸€é“é¢è¯•é¢˜ã€‚åœ¨åŸæ–‡ä¸­å·²ç»æ˜ç¡®ç‚¹å‡ºäº†æ‰€éœ€çš„ä¸€äº›å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯æ’åºå’Œå»é‡ã€‚C++æœ‰ç°æˆçš„æ’åºå‡½æ•°<code>sort()</code>ï¼Œä»¥åŠå»é‡å‡½æ•°<code>unique()</code>ã€‚å…¶ä¸­<code>unique()</code>,<code>sort()</code>éƒ½æ˜¯å±äºå¤´æ–‡ä»¶<code>#include &lt;algorithm&gt;</code></p><p><code>auto end_un = unique(vec.begin(),vec.end());</code></p><p>è¿™é‡Œçš„<code>unique()</code>è¿”å›çš„å€¼æ˜¯<font color="#dd0000">æœ€åä¸€ä¸ªä¸é‡å¤æ•°å­—çš„ä¸‹æ ‡ã€‚</font></p><p>sortå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><p>ç¬¬ä¸€ä¸ªæ˜¯è¦æ’åºçš„æ•°ç»„çš„èµ·å§‹åœ°å€</p></li><li><p>ç¬¬äºŒä¸ªæ˜¯ç»“æŸçš„åœ°å€ï¼ˆæœ€åä¸€ä½è¦æ’åºçš„åœ°å€)</p></li><li><p>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ’åºçš„æ–¹æ³•ï¼Œå¯ä»¥æ˜¯å‡åºä¹Ÿå¯æ˜¯é™åºã€‚å¦‚æœä¸å†™ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œåˆ™é»˜è®¤çš„æ’åºæ–¹æ³•æ˜¯å‡åºæ’åˆ—</p></li></ul><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡åº</span></span><br><span class="line">sort( a, b, less&lt;<span class="keyword">int</span>&gt;() );</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é™åº</span></span><br><span class="line">sort( a, b, greater&lt;<span class="keyword">int</span>&gt;() );</span><br></pre></td></tr></table></figure><p>å¦‚æœå…ˆ<code>å»é‡</code>å†<code>æ’åº</code>ï¼Œé‚£ä¹ˆ<code>å»é‡</code>å°±æœ‰å¯èƒ½ä¸ä¼šå‘æŒ¥ä½œç”¨ã€‚å› ä¸º<code>å»é‡</code>å†<code>æ’åº</code>æ’åºæ—¶ä¼šæŠŠé‡å¤çš„æ•°å­—åˆæ”¾åœ¨äº†ä¸€èµ·ï¼Œæ‰€ä»¥è¦å…ˆ<code>æ’åº</code>å†<code>å»é‡</code>ã€‚</p><h2 id="0x1-ä»£ç å®ç°"><a href="#0x1-ä»£ç å®ç°" class="headerlink" title="0x1.ä»£ç å®ç°"></a>0x1.ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  main.cpp</span></span><br><span class="line"><span class="comment">//  Demo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Egan.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">int</span> n= <span class="number">0</span>,num = <span class="number">0</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//input</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; num;</span><br><span class="line">            vec.push_back(num);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//sort</span></span><br><span class="line">        sort(vec.begin(), vec.end());</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//unique</span></span><br><span class="line">        <span class="keyword">auto</span> end_un = unique(vec.begin(),vec.end());</span><br><span class="line">        vec.erase(end_un, vec.end());</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> m = vec.begin(); m != vec.end(); m ++) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; *m &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Leetcode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
            <tag> C++ </tag>
            
            <tag> Leetcode </tag>
            
            <tag> sort </tag>
            
            <tag> unique </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯•ä¸šåŠå¹´çš„è‡ªå·±</title>
      <link href="2020/12/22/Six_months_after_graduation/"/>
      <url>2020/12/22/Six_months_after_graduation/</url>
      
        <content type="html"><![CDATA[<h2 id="0x0-åŠå¹´ä¹‹å"><a href="#0x0-åŠå¹´ä¹‹å" class="headerlink" title="0x0.åŠå¹´ä¹‹å"></a>0x0.åŠå¹´ä¹‹å</h2><p>&emsp;æˆ‘ä»¬è¿™å±Šçš„æ¯•ä¸šç”Ÿï¼Œå¤§å­¦åªä¸Šäº†ä¸‰å¹´åŠï¼Œæœ€ååŠå¹´çš„æ—¶å…‰éƒ½æ˜¯åœ¨å®¶é‡Œæ¸¡è¿‡ã€‚æ‹¿æ¯•ä¸šè¯å­¦ä½è¯ã€æ‹æ¯•ä¸šç…§ä»¥åŠæ”¶æ‹¾è¡Œæï¼ŒåŠ èµ·æ¥ä¸è¿‡ä¸¤å¤©æ—¶é—´ã€‚ä¸€åˆ‡éƒ½æ˜¯åŒ†åŒ†å¿™å¿™ï¼ŒåŒ†å¿™åˆ°è¿ä¸€é¡¿æ•£ä¼™é¥­éƒ½æ²¡æ³•è¿›è¡Œã€‚<br><br>&emsp;è¿˜å·®å‡ æ—¥ï¼Œè‡ªå·±ä¹Ÿå°±æ¯•ä¸šåŠå¹´äº†ï¼Œä¹Ÿç®—æ˜¯æœ‰äº†åŠå¹´çš„<del>å·¥ä½œç»éªŒ</del>(åˆ’æ°´ç»éªŒ)ï¼Œå­¦è½¯ä»¶çš„æˆ‘ï¼Œæ¯•ä¸šä¹‹åè¿›äº†ä¸€å®¶åè‡ªåŠ¨åŒ–çš„å…¬å¸ï¼Œå·¥ä¸š4.0æ—¶ä»£å˜›ï¼Œå¤©å¤©ä»£ç å€’æ˜¯ä¸å¤šï¼Œæ„Ÿè§‰è¿˜ä¸é”™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸ </category>
          
          <category> å·¥ä½œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
            <tag> æ‚è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Test</title>
      <link href="2020/10/22/firstPage/"/>
      <url>2020/10/22/firstPage/</url>
      
        <content type="html"><![CDATA[<p><strong>æµ‹è¯•æ–‡æ¡£</strong></p><pre><code>ä»è¿™ä¸€ç¯‡æµ‹è¯•æ–‡æ¡£å¼€å§‹ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿæ”¶èµ·æ‡’æƒ°ï¼Œé‡æ‹¾æ¿€æƒ…</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Test </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
